[{"url":".","title":"index","description":"","tags":["homepage"],"text":""},{"url":"installation/","title":"Software installation","description":"","tags":["welcome"],"text":"First-time setup: Install Julia & PlutoVideo version:Note: this video was recorded in 2020, so everything looks a bit different, but the steps are the same!Text and pictures version:Step 1: Install Julia 1.10.4Go to https://julialang.org/downloads and download the current stable release, Julia 1.10.4, using the correct version for your operating system (Linux x86, Mac, Windows, etc).Step 2: Run JuliaAfter installing, make sure that you can run Julia. On some systems, this means searching for the “Julia 1.10.4” program installed on your computer; in others, it means running the command julia in a terminal. Make sure that you can execute 1 + 1:Make sure that you are able to launch Julia and calculate 1+1 before proceeding!Step 3: Install PlutoNext we will install the Pluto, the notebook environment that we will be using during the course. Pluto is a Julia programming environment designed for interactivity and quick experiments.Open the Julia REPL. This is the command-line interface to Julia, similar to the previous screenshot.Here you type Julia commands, and when you press ENTER, it runs, and you see the result.To install Pluto, we want to run a package manager command. To switch from Julia mode to Pkg mode, type ] (closing square bracket) at the julia> prompt:\njulia> ]\n\n(@v1.10) pkg>\nThe line turns blue and the prompt changes to pkg>, telling you that you are now in package manager mode. This mode allows you to do operations on packages (also called libraries).To install Pluto, run the following (case sensitive) command to add (install) the package to your system by downloading it from the internet.\nYou should only need to do this once for each installation of Julia:\n(@v1.10) pkg> add Pluto\nThis might take a couple of minutes, so you can go get yourself a cup of tea!You can now close the terminal.Step 4: Use a modern browser: Mozilla Firefox or Google ChromeWe need a modern browser to view Pluto notebooks with. Firefox and Chrome work best.Second time: Running Pluto & opening a notebookRepeat the following steps whenever you want to work on a project or homework assignment.Step 1: Start PlutoStart the Julia REPL, like you did during the setup. In the REPL, type:julia> using Pluto\n\njulia> Pluto.run()\nThe terminal tells us to go to http://localhost:1234/ (or a similar URL). Let’s open Firefox or Chrome and type that into the address bar.If you’re curious about what a Pluto notebook looks like, have a look at the Featured Notebooks. These notebooks are useful for learning some basics of Julia programming.If you want to hear the story behind Pluto, have a look a the JuliaCon presentation.If nothing happens in the browser the first time, close Julia and try again. And please let us know!Step 2a: Opening a notebook from the webThis is the main menu - here you can create new notebooks, or open existing ones. Our homework assignments will always be based on a template notebook, available in this GitHub repository. To start from a template notebook on the web, you can paste the URL into the blue box and press ENTER.For example, homework 0 is available here. Go to this page, and on the top right, click on the button that says “Edit or run this notebook”. From these instructions, copy the notebook link, and paste it into the box. Press ENTER, and select OK in the confirmation box.The first thing we will want to do is to save the notebook somewhere on our own computer; see below.Step 2b: Opening an existing notebook fileWhen you launch Pluto for the second time, your recent notebooks will appear in the main menu. You can click on them to continue where you left off.If you want to run a local notebook file that you have not opened before, then you need to enter its full path into the blue box in the main menu. More on finding full paths in step 3.Step 3: Saving a notebookWe first need a folder to save our homework in. Open your file explorer and create one.Next, we need to know the absolute path of that folder. Here’s how you do that in Windows and MacOS. In Linux, right click and “Copy file path”.For example, you might have:C:\\Users\\fons\\Documents\\18S191_assignments\\ on Windows./Users/fons/Documents/18S191_assignments/ on MacOS./home/fons/Documents/18S191_assignments/ on Ubuntu.Now that we know the absolute path, go back to your Pluto notebook, and at the top of the page, click on “Save notebook…”.This is where you type the new path+filename for your notebook:Click Choose.Step 4: Sharing a notebookAfter working on your notebook (your code is autosaved when you run it), you will find your notebook file in the folder we created in step 3. This the file that you can share with others, or submit as your homework assignment to Canvas.\nconst run = f => f();\nrun(async () => {\nconst versions = await (await fetch(`https://julialang-s3.julialang.org/bin/versions.json`)).json()\nconst sortby = v => v.split(\"-\")[0].split(\".\").map(parseFloat).reduce((a,b) => a*10000 + b)\nconst version_names = Object.keys(versions).sort((a,b) => sortby(a) - sortby(b)).reverse()\nconst stable = version_names.find(v => versions[v].stable)\nconsole.log({stable})\nconst pkg_stable = /\\d+\\.\\d+/.exec(stable)[0]\ndocument.querySelectorAll(\"auto-julia-version\").forEach(el => {\n    console.log(el)\n    el.innerText = el.getAttribute(\"short\") == null ? stable : pkg_stable\n})\n});"},{"url":"sidebar data/","title":"sidebar data","description":"","tags":[],"text":"Dict \"main\" \"welcome\" collections \"welcome\" .pages, \"Module 1 ODE solver's\" collections \"module1\" .pages, \"Module 2 PDE's\" collections \"module2\" .pages, \"Module 3 Dynamical Systems and control\" collections \"module3\" .pages, , "},{"url":"climate_science/2d_advection_diffusion/","title":"Advection and diffusion in 2D","description":"","tags":["lecture","module3","PDE","differential equation","track_math","track_climate","structure","modeling","climate","simulation","fluid simulation","continuous","advection–diffusion"],"text":" A Pluto.jl notebook v0.19.45 frontmatter chapter 3 video \"https www.youtube.com watch?v DdTWgBlDgr0\" image \"https user images.githubusercontent.com 6933510 136200688 e3c6d6ee 808c 433f 8252 af6ad278fb4d.gif\" section 9 order 9 title \"Advection and diffusion in 2D\" layout \"layout.jlhtml\" youtube id \"DdTWgBlDgr0\" description \"\" tags \"lecture\", \"module3\", \"PDE\", \"differential equation\", \"track math\", \"track climate\", \"structure\", \"modeling\", \"climate\", \"simulation\", \"fluid simulation\", \"continuous\", \"advection–diffusion\" using Markdown using InteractiveUtils This Pluto notebook uses bind for interactivity. When running this notebook outside of Pluto, the following 'mock version' of bind gives bound variables a default value instead of an error . macro bind def, element quote local iv try Base.loaded modules Base.PkgId Base.UUID \"6e696c72 6542 2067 7265 42206c756150\" , \"AbstractPlutoDingetjes\" .Bonds.initial value catch b missing end local el esc element global esc def Core.applicable Base.get, el ? Base.get el iv el el end end begin using Statistics using Plots using PlutoUI using OffsetArrays end TableOfContents md\"\"\" PDEs in 2D Heat transport by ocean currents \"\"\" html\"\"\" iframe width \"700\" height \"394\" src \"https www.youtube nocookie.com embed 6 GQuVopmUM?start 15\" frameborder \"0\" allow \"accelerometer autoplay clipboard write encrypted media gyroscope picture in picture\" allowfullscreen iframe \"\"\" md\"\"\" One dimensional advection diffusion Let's recall from the previous lecture that we derived the advection diffusion equation with one spatial dimension \\frac \\partial T x,t \\partial t U \\frac \\partial T \\partial x \\kappa \\frac \\partial^ 2 T \\partial x^ 2 , where T x, t is the temperature, U is a constant advective velocity and \\kappa is the heat diffusivity . Two dimensional advection diffusion The two dimensional advection diffusion equation adds advection and diffusion operators acting in a second spatial dimension y that is perpendicular to x . The temperature field T is then a function T T x, y, t , and the PDE becomes \\frac \\partial T x,y,t \\partial t u x,y \\frac \\partial T \\partial x v x,y \\frac \\partial T \\partial y \\kappa \\left \\frac \\partial^ 2 T \\partial x^ 2 \\frac \\partial^ 2 T \\partial y^ 2 \\right , where \\vec u x,y u, v u\\,\\mathbf \\hat x v\\,\\mathbf \\hat y is a velocity vector field, and each partial derivative is also a function of x , y and t . We will think of x as being the longitudinal direction positive from west to east and y as the latitudinal direction positive from south to north . \"\"\" begin reviewBox bind show review CheckBox default false md\"\"\" Review of multivariable calculus identities and notation Check the box for a review reviewBox \"\"\" end if show review md\"\"\" The two dimensional advection diffusion equation is often written more succinctly as \\frac \\partial T x,y,t \\partial t \\vec u \\cdot \\nabla T \\kappa \\nabla^ 2 T, using the following shorthand notation. The gradient operator is defined as \\nabla \\equiv \\left \\frac \\partial \\partial x , \\frac \\partial \\partial y \\right such that \\nabla T \\left \\frac \\partial T \\partial x , \\frac \\partial T \\partial y \\right and \\vec u \\cdot \\nabla T u, v \\cdot \\left \\frac \\partial T \\partial x , \\frac \\partial T \\partial y \\right u \\frac \\partial T \\partial x v\\frac \\partial T \\partial y . The Laplacian operator \\nabla^ 2 , sometimes denoted \\Delta , is defined as \\nabla^ 2 \\frac \\partial^ 2 \\partial x^ 2 \\frac \\partial^ 2 \\partial y^ 2 such that \\nabla^ 2 T \\frac \\partial^ 2 T \\partial x^ 2 \\frac \\partial^ 2 T \\partial y^ 2 . The divergence operator is defined as \\nabla \\cdot \\quad , such that \\nabla \\cdot \\vec u \\left \\frac \\partial \\partial x , \\frac \\partial \\partial x \\right \\cdot u,v \\frac \\partial u \\partial x \\frac \\partial v \\partial y . Note Since seawater is largely incompressible , we have \\nabla \\cdot \\vec u \\frac \\partial u \\partial x \\frac \\partial v \\partial y 0 , i.e. ocean currents are approximately a non divergent flow . Among other implications, this allows us to write \\begin align \\vec u \\cdot \\nabla T& u\\frac \\partial T x,y,t \\partial x v\\frac \\partial T x,y,t \\partial y \\newline & u\\frac \\partial T \\partial x v\\frac \\partial T \\partial y T\\left \\frac \\partial u \\partial x \\frac \\partial v \\partial y \\right \\newline & \\left u\\frac \\partial T \\partial x T\\frac \\partial u \\partial x \\right \\left v\\frac \\partial T \\partial y \\frac \\partial v \\partial y \\right \\newline & \\frac \\partial uT \\partial x \\frac \\partial vT \\partial x \\newline & \\nabla \\cdot \\vec u T \\end align using the product rule separately in both x and y . The flux form two dimensional advection diffusion equation This lets us finally re write the two dimensional advection diffusion equation as \\frac \\partial T \\partial t \\nabla \\cdot \\vec u T \\kappa \\nabla^ 2 T, which is the form we will use in our numerical algorithm below. \"\"\" end md\"\"\" Numerical solution of the 2D equation Discretizing advection in two dimensions In Lecture XX we saw that in one dimension we can discretize a first partial derivative in space using the centered finite difference \\frac \\partial T x i , t n \\partial x \\approx \\frac T i 1 ^ n T i 1 ^ n 2 \\Delta x . In two dimensions, we discretize the partial derivative the exact same way, except that we also need to keep track of the cell index j in the y dimension \\frac \\partial T x i , y j , t n \\partial x \\approx \\frac T i 1,\\, j ^ n T i 1,\\,j ^ n 2 \\Delta x . The x gradient kernel below, implemented using the `OffsetArray` type, is shown below, and is reminiscent of the edge detection or sharpening kernels used in image processing and machine learning \"\"\" md\"\"\" The first order partial derivative in y is similarly discretized as \\frac \\partial T x i , y j , t n \\partial y \\approx \\frac T i,\\, j 1 ^ n T i,\\,j 1 ^ n 2 \\Delta y . Its kernel is shown below. \"\"\" md\"\"\" Now that we have discretized the two derivate terms, we can write out the advective tendency for computing T i, j, n 1 as u\\frac \\partial T \\partial x v\\frac \\partial T \\partial y \\approx u i,\\, j ^ n \\frac T i,\\, j 1 ^ n T i,\\,j 1 ^ n 2 \\Delta y v i,\\, j ^ n \\frac T i,\\, j 1 ^ n T i,\\,j 1 ^ n 2 \\Delta y . We implement this in julia as a series of methods for the `advect` function. The first method computes the advective tendency as a single `Float64` type for the i,j grid cell while the second method returns an array of the tendencies for each grid cell using two nested for loops. \"\"\" md\"\"\" Discretizing diffusion in two dimensions Just as with advection, the process for discretizing the diffusion operators effectively consists of repeating the one dimensional process for x in a second dimension y , separately \\kappa \\left \\frac \\partial^ 2 T \\partial x^ 2 \\frac \\partial^ 2 T \\partial y^ 2 \\right \\kappa \\left \\frac T i 1,\\ j ^ n 2T i,\\ j ^ n T i 1,\\ j ^ n \\left \\Delta x \\right ^ 2 \\frac T i,\\ j 1 ^ n 2T i,\\ j ^ n T i,\\ j 1 ^ n \\left \\Delta y \\right ^ 2 \\right The corresponding x and y second derivative kernels are shown below \"\"\" md\"\"\" Just as we did with advection, we implement a `diffuse` function using multiple dispatch \"\"\" md\"\"\" No flux boundary conditions We want to impose the no flux boundary conditions, which states that u\\frac \\partial T \\partial x \\kappa \\frac \\partial T \\partial x 0 at x boundaries and v\\frac \\partial T \\partial y \\kappa \\frac \\partial T \\partial y 0 at the y boundaries. To impose this, we treat i 1 and i N x as ghost cells , which do not do anything expect help us impose these boundaries conditions. Discretely, the boundary fluxes between i 1 and i 2 vanish if \\dfrac T 2,\\,j ^ n T 1,\\,j ^ n \\Delta x 0 or T 1,\\,j ^ n T 2,\\,j ^ n . Thus, we can implement the boundary conditions by updating the temperature of the ghost cells to match their interior point neighbors \"\"\" function update ghostcells A Array Float64,2 option \"no flux\" Atmp view A , if option \"no flux\" A 1, Atmp 2, Atmp end, Atmp end 1, A , 1 Atmp , 2 Atmp , end Atmp , end 1 end end md\"Let's get a feel for what this is actually doing\" begin A rand Float64, 6,6 heatmap A, size 200, 200 end | as svg begin Acopy copy A update ghostcells Acopy heatmap Acopy, size 200, 200 end | as svg md\"\"\" Timestepping \"\"\" md\"\"\" Data structures \"\"\" begin struct Grid N Int64 L Float64 Δx Float64 Δy Float64 x Array Float64,2 y Array Float64,2 Nx Int64 Ny Int64 function Grid N, L Δx L N m Δy L N m x 0. Δx 2. Δx L Δx 2. x reshape x, 1, size x,1 y L Δy 2. Δy L Δy 2. y reshape y, size y,1 , 1 Nx, Ny size x, 2 , size y, 1 return new N, L, Δx, Δy, x, y, Nx, Ny end end Base.zeros G Grid zeros G.Ny, G.Nx end struct Parameters κ Float64 end abstract type ClimateModel end begin struct OceanModel ClimateModel G Grid P Parameters u Array Float64,2 v Array Float64,2 end OceanModel G, P OceanModel G, P, zeros G , zeros G OceanModel G OceanModel G, Parameters 1.e4 , zeros G , zeros G end begin mutable struct ClimateModelSimulation ModelType ClimateModel model ModelType T Array Float64,2 Δt Float64 iteration Int64 end ClimateModelSimulation C ModelType, T, Δt where ModelType ClimateModelSimulation ModelType C, T, Δt, 0 end md\"\"\" Simulating heat transport by advective & diffusive ocean currents \"\"\" md\" Simulation controls \" begin quiverBox bind show quiver CheckBox default false anomalyBox bind show anomaly CheckBox default false md\"\"\" Click to show the velocity field quiverBox or to show temperature anomalies instead of absolute values anomalyBox \"\"\" end begin U ex Slider bind U ex Slider 4 1 8, default 0, show value false md\"\"\" U ex Slider \"\"\" end begin md\" Vary the current speed U 2. ^U ex × reference \" end begin κ ex Slider bind κ ex Slider 0. 1.e3 1.e5, default 1.e4, show value true md\"\"\" Vary the diffusivity κ κ ex Slider m² s \"\"\" end bind go ex Clock 0.1 md\"\"\" Some unit tests for verification \"\"\" function CFL adv sim ClimateModelSimulation maximum sqrt. sim.model.u.^2 sim.model.v.^2 sim.Δt sim.model.G.Δx end md\"\"\" Appendix \"\"\" Nvec 1 25 function plot state sim ClimateModelSimulation clims 1.1, 1.1 , show quiver true, show anomaly false, IC nothing model sim.model grid sim.model.G p plot xlabel \"longitudinal distance km \", ylabel \"latitudinal distance km \", clabel \"Temperature\", yticks grid.L 1000e3 grid.L , Int64. 1e 3 grid.L 1000e3 grid.L , xticks 0 1000e3 grid.L , Int64. 1e 3 0 1000e3 grid.L , xlims 0., grid.L , ylims grid.L, grid.L , X repeat grid.x, grid.Ny, 1 Y repeat grid.y, 1, grid.Nx if show anomaly arrow col black maxdiff maximum abs. sim.T . IC heatmap p, grid.x , grid.y , sim.T . IC, clims 1.1, 1.1 , color balance, colorbar title \"Temperature anomaly °C \", linewidth 0., size 400, 530 else arrow col white heatmap p, grid.x , grid.y , sim.T, color thermal, levels clims 1 clims 2 clims 1 21. clims 2 , colorbar title \"Temperature °C \", clims clims, linewidth 0., size 400, 520 end annotate p, 50e3, 6170e3, text string \"t \", Int64 round sim.iteration sim.Δt 60 60 24 , \" days\" , color black, left, 9 if show quiver Nq grid.N ÷ 5 quiver p, X Nq 1 ÷2 Nq end , Y Nq 1 ÷2 Nq end , quiver grid.L 4 . model.u Nq 1 ÷2 Nq end , model.v Nq 1 ÷2 Nq end , color arrow col, alpha 0.7 end as png p end md\"\"\" Computing the velocity field for a single circular vortex \"\"\" begin ∂x ϕ, Δx ϕ ,2 end ϕ ,1 end 1 Δx ∂y ϕ, Δy ϕ 2 end, ϕ 1 end 1, Δy xpad ϕ hcat zeros size ϕ,1 , ϕ, zeros size ϕ,1 ypad ϕ vcat zeros size ϕ,2 ', ϕ, zeros size ϕ,2 ' xitp ϕ 0.5 ϕ ,2 end ϕ ,1 end 1 yitp ϕ 0.5 ϕ 2 end, ϕ 1 end 1, function diagnose velocities ψ, G u xitp ∂y ψ, G.Δy G.L v yitp ∂x ψ, G.Δx G.L return u, v end end function impose no flux u, v u 1, . 0. v 1, . 0. u end, . 0. v end, . 0. u ,1 . 0. v ,1 . 0. u ,end . 0. v ,end . 0. end function PointVortex G Ω 1., a 0.2, x0 0.5, y0 0. x reshape 0. G.Δx G.L G.Δx G.L 1. G.Δx G.L , 1, G.Nx 1 y reshape 1. G.Δy G.L G.Δy G.L 1. G.Δy G.L , G.Ny 1, 1 function ψ̂ x,y r sqrt. y . y0 .^2 . x . x0 .^2 stream Ω 4 r.^2 stream r . a Ω a^2 4 1. . 2 log. r r . a a return stream end u, v diagnose velocities ψ̂ x, y , G impose no flux u, v return u, v end md\"\"\" Computing a quasi realistic ocean velocity field \\vec u u, v Our velocity field is given by an analytical solution to the classic wind driven gyre problem, which is given by solving the fourth order partial differential equation \\epsilon M \\hat \\nabla ^ 4 \\hat \\Psi \\frac \\partial \\hat \\Psi \\partial \\hat x \\nabla \\times \\hat \\tau \\mathbf z , where the hats denote that all of the variables have been non dimensionalized and all of their constant coefficients have been bundles into the single parameter \\epsilon M \\equiv \\dfrac \\nu \\beta L^3 . The solution makes use of an advanced asymptotic method valid in the limit that \\epsilon \\ll 1 known as boundary layer analysis see MIT course 18.305 to learn more . \"\"\" function DoubleGyre G β 2e 11, τ₀ 0.1, ρ₀ 1.e3, ν 1.e5, κ 1.e5, H 1000. ϵM ν β G.L^3 ϵ ϵM^ 1 3. x reshape 0. G.Δx G.L G.Δx G.L 1. G.Δx G.L , 1, G.Nx 1 y reshape 1. G.Δy G.L G.Δy G.L 1. G.Δy G.L , G.Ny 1, 1 ψ̂ x,y π sin. π y 1 . x exp. x 2 ϵ . cos. √3 x 2 ϵ . 1. √3 sin. √3 x 2 ϵ . ϵ exp. x . 1. ϵ u, v τ₀ ρ₀ β G.L H . diagnose velocities ψ̂ x, y , G impose no flux u, v return u, v end md\"\"\" Some simple initial temperature fields \"\"\" linearT G 0.5 1. . y G.L for y in G.y , 1 , x in G.x 1, function InitBox G value 1., nx 2, ny 2, xspan false, yspan false T zeros G T G.Ny÷2 ny G.Ny÷2 ny, G.Nx÷2 nx G.Nx÷2 nx . value if xspan T G.Ny÷2 ny G.Ny÷2 ny, . value end if yspan T , G.Nx÷2 nx G.Nx÷2 nx . value end return T end begin G Grid 10, 6.e6 P Parameters κ ex u, v zeros G , zeros G u, v PointVortex G, Ω 0.5 u, v DoubleGyre G IC InitBox G IC InitBox G, xspan true IC linearT G model OceanModel G, P, u 2. ^U ex, v 2. ^U ex Δt 12 60 60 ocean sim ClimateModelSimulation model, copy IC , Δt end begin heat capacity 51. total heat content sum heat capacity ocean sim.T ocean sim.model.G.Δx ocean sim.model.G.Δy 1e 15 mean temp mean ocean sim.T end begin go ex md\"\"\" Let's make sure our model conserves energy. We have not added any energy to the system advection and diffusion just move the energy around. The total heat content is round total heat content, digits 3 peta Joules and the average temperature is round mean temp, digits 2 °C. \"\"\" end md\" The CFL condition The CFL condition is defined by \\text CFL \\dfrac \\max\\left \\sqrt u² v² \\right Δt Δx round CFL adv ocean sim , digits 2 \" plot kernel A heatmap collect A , color bluesreds, clims maximum abs. A , maximum abs. A , colorbar false, xticks false, yticks false, size 30 30 size A, 2 , 30 30 size A, 1 , xaxis false, yaxis false begin xgrad kernel OffsetArray reshape 1., 0, 1. , 1, 3 , 0 0, 1 1 plot kernel xgrad kernel end begin ygrad kernel OffsetArray reshape 1., 0, 1. , 3, 1 , 1 1, 0 0 plot kernel ygrad kernel end begin function advect T, u, v, Δy, Δx, j, i return . u j, i . sum xgrad kernel 0, 1 1 . T j, i 1 i 1 2Δx . v j, i . sum ygrad kernel 1 1, 0 . T j 1 j 1, i 2Δy end advect T, u, v, Δy, Δx advect T, u, v, Δy, Δx, j, i for j 2 size T, 1 1, i 2 size T, 2 1 advect T, O OceanModel advect T, O.u, O.v, O.G.Δy, O.G.Δx end begin xdiff kernel OffsetArray reshape 1., 2., 1. , 1, 3 , 0 0, 1 1 ydiff kernel OffsetArray reshape 1., 2., 1. , 3, 1 , 1 1, 0 0 plot kernel xdiff kernel , plot kernel ydiff kernel end begin function diffuse T, κ, Δy, Δx, j, i return κ. sum xdiff kernel 0, 1 1 . T j, i 1 i 1 Δx^2 sum ydiff kernel 1 1, 0 . T j 1 j 1, i Δy^2 end diffuse T, κ, Δy, Δx diffuse T, κ, Δy, Δx, j, i for j 2 size T, 1 1, i 2 size T, 2 1 diffuse T, O OceanModel diffuse T, O.P.κ, O.G.Δy, O.G.Δx end function timestep sim ClimateModelSimulation OceanModel update ghostcells sim.T tendencies advect sim.T, sim.model . diffuse sim.T, sim.model sim.T 2 end 1, 2 end 1 . sim.Δt tendencies sim.iteration 1 end for i in 1 50 timestep ocean sim end let go ex if ocean sim.iteration 0 timestep ocean sim else for i in 1 50 timestep ocean sim end end plot state ocean sim, clims 0.1, 1 , show quiver show quiver, show anomaly show anomaly, IC IC end tvec map Nvec do Npower G Grid 8 Npower, 6.e6 P Parameters κ ex u, v DoubleGyre G u, v PointVortex G, Ω 0.5 u, v zeros G , zeros G model OceanModel G, P, u, v IC InitBox G IC InitBox G, nx G.Nx÷2 1 IC linearT G Δt 6 60 60 S ClimateModelSimulation model, copy IC , Δt return elapsed timestep S end begin plot 8 Nvec, tvec, xlabel \"Number of Grid Cells in x direction \", ylabel \"elapsed time per timestep s \" end | as svg "},{"url":"climate_science/controllability_observability/","title":"Controllability and Observability","description":"","tags":["lecture","module1","track_julia","track_math"],"text":" A Pluto.jl notebook v0.20.21 frontmatter chapter 3 section 5 order 5 title \"Controllability and Observability\" layout \"layout.jlhtml\" tags \"lecture\", \"module1\", \"track julia\", \"track math\" using Markdown using InteractiveUtils using ControlSystemsBase,LinearAlgebra,PlutoUI PlutoUI.TableOfContents md\"\"\" Controllability and Observability \"\"\" md\"\"\" The ability to design the eigenvalues of the closed loop system with the choice of K relies on the system in 8.10a being controllable. The controllability of a linear system is determined entirely by the column space of the controllabilitymatrix \\mathcal C \\begin bmatrix B & AB & A^2B & \\cdots & A^ n 1 B \\end bmatrix If the matrix \\mathcal C has n linearly independent columns, so that it spans all of \\mathbb R ^n , then the system in is controllable. \"\"\" md\"\"\" Example The notion of controllability is more easily understood by investigating a few simple examples. First, consider the following system \\frac d dt \\begin bmatrix x 1\\\\x 2\\end bmatrix \\begin bmatrix 1 &0\\\\0 &2\\end bmatrix \\begin bmatrix x 1\\\\x 2\\end bmatrix \\begin bmatrix 0\\\\1\\end bmatrix u\\implies\\mathcal C \\begin bmatrix 0 &0\\\\1 &2\\end bmatrix This system is not controllable because the controllablity matrix consists of two linearly dependent vectors. Even without checking the rank of the matrix it is easy to see that the system is not controllable. \"\"\" begin A 1 0 0 2 B 0 1 rank ctrb A,B end md\"\"\" Modifying this example to include two actuation inputs makes the system controllable by increasing the control authority \\frac d dt \\begin bmatrix x 1\\\\x 2\\end bmatrix \\begin bmatrix 1 &0\\\\0 &2\\end bmatrix \\begin bmatrix x 1\\\\x 2\\end bmatrix \\begin bmatrix 1&0\\\\0&1\\end bmatrix \\begin bmatrix u 1\\\\u 2\\end bmatrix \\implies\\mathcal C \\begin bmatrix 1&0&2&0\\\\0&1&0&1\\end bmatrix As you can see below the controllability matrix now has rank 2 \"\"\" begin A₂ 1 0 0 2 B₂ 1 0 0 1 rank ctrb A₂,B₂ end md\"\"\" This fully actuated system is clearly controllable because x 1 and x 2 may be independently controlled with u 1 and u 2 . The most interesting cases are less obvious than these two examples. Consider the system. \\frac d dt \\begin bmatrix x 1\\\\x 2\\end bmatrix \\begin bmatrix 1 &1\\\\0 &2\\end bmatrix \\begin bmatrix x 1\\\\x 2\\end bmatrix \\begin bmatrix 0\\\\1\\end bmatrix u\\implies\\mathcal C \\begin bmatrix 0 &1\\\\1 &2\\end bmatrix This system is now controllable through the couples dynamics. \"\"\" "},{"url":"climate_science/pendulum/","title":"Control of Pendulum on a cart","description":"","tags":["lecture","module1","track_julia","track_math"],"text":" A Pluto.jl notebook v0.20.21 frontmatter chapter 3 section 6 order 6 title \"Control of Pendulum on a cart\" layout \"layout.jlhtml\" tags \"lecture\", \"module1\", \"track julia\", \"track math\" using Markdown using InteractiveUtils using ControlSystemsBase,LinearAlgebra,PlutoUI,DifferentialEquations,Plots function cartpend du, u, p, t unpack parameters m, M, L, g, d, F func p unpack state x u 1 ẋ u 2 θ u 3 θ̇ u 4 F F func u 1 trigonometric shorthand s sin θ c cos θ auxiliary term D m L^2 M m 1 c^2 equations of motion du 1 ẋ du 2 1 D m^2 L^2 g c s m L^2 m L θ̇^2 s d ẋ m L^2 1 D F du 3 θ̇ du 4 1 D M m m g L s m L c m L θ̇^2 s d ẋ m L c 1 D F end begin m 1 M 1 L 2 g 10 d 1 F 1 u 0 p m,M,L,g,d,F 1 u0 1 3.0, 0.0, 3,0.2 small angle end A 0 1 0 0 0 d M m g M 0 0 0 0 1 0 d M L M m g M L 0 B 0 1 M 0 1 M L md\"\"\" Checking for full controllability by checking the rank of the control matrix \"\"\" rank ctrb A,B begin eigs 2.0 2.2 2.4 2.6 K place A,B,eigs end eigvals A B K function sim cartpend u0,tspan,p prob ODEProblem cartpend , u0, tspan, p sol solve prob, KenCarp5 , saveat 0.05 t sol.t x sol 1, θ sol 3, x, θ, t end begin tspan 0.0, 30.0 x,θ,t sim cartpend u0 1,tspan,p end begin u0 2 3.0, 1.0, 3,0.2 target 1.0 0.0 π 0.0 F control u K u target p₂ m,M,L,g,d,F control tspan₂ 0.0, 10.0 x₂,θ₂,t₂ sim cartpend u0 2,tspan₂,p₂ end x₂ end function draw cart x,θ,t,fps name nothing Animation anim animate for i in 1 length t Pendulum position px x i L sin θ i py L cos θ i w, h 1, 0.6 x block, y x i w 2, 0.1 rect Shape x block, x block w, x block w, x block , y, y, y h, y h plot 5, 5 , 0, 0 , lw 3, label false, xlims 5,6 , ylims 2.5,2.5 , aspect ratio equal ground plot rect,label false plot x i 0.3,x i 0.3 , 0.1,0.1 , seriestype scatter, markersize 6, label false,color black plot x i , px , h 2 y, py h 2 y , lw 3, label false,color black plot px , py h 2 y , seriestype scatter, markersize 8, label false,color blue end if isnothing name || isempty name no filename provided, just save with a default mp4 anim, fps fps else save with the given filename mp4 anim, name, fps fps end end ╠═╡ draw cart x,θ,t,20, name \"pendulum cart.mp4\" ╠═╡ draw cart x₂,θ₂,t₂,20, name \"pole place.mp4\" "},{"url":"climate_science/time_stepping/","title":"Time stepping","description":"","tags":["lecture","module3","epidemiology","track_math","track_climate","plotting","continuous","discrete","ODE","differential equation","modeling"],"text":" A Pluto.jl notebook v0.19.45 frontmatter chapter 3 video \"https www.youtube.com watch?v 3Y5gVyO8KcI\" image \"https user images.githubusercontent.com 6933510 136199718 ff811eb3 aad6 4d6b 99e0 f6bf922816b4.png\" section 1 order 1 title \"Time stepping\" layout \"layout.jlhtml\" youtube id \"3Y5gVyO8KcI\" description \"\" tags \"lecture\", \"module3\", \"epidemiology\", \"track math\", \"track climate\", \"plotting\", \"continuous\", \"discrete\", \"ODE\", \"differential equation\", \"modeling\" using Markdown using InteractiveUtils This Pluto notebook uses bind for interactivity. When running this notebook outside of Pluto, the following 'mock version' of bind gives bound variables a default value instead of an error . macro bind def, element quote local iv try Base.loaded modules Base.PkgId Base.UUID \"6e696c72 6542 2067 7265 42206c756150\" , \"AbstractPlutoDingetjes\" .Bonds.initial value catch b missing end local el esc element global esc def Core.applicable Base.get, el ? Base.get el iv el el end end using Plots, PlutoUI, StatsBase, Statistics PlutoUI.TableOfContents md\"\"\" Modeling component failure Discrete and continuous \"\"\" md\"\"\" Let's think about a simple model for failure of components such as light bulbs. We actually derived this global, or macroscopic, model from a microscopic stochastic model a few lectures ago. Components can fail at any moment but we'll start off by checking once per day to count the number that have failed during that day. Then we'll check several times per day. This is still a discrete model. Finally we'll see how we can turn this into a continuous model where we can talk about the number that have failed by any real time t . \"\"\" md\"\"\" Checking failures once per day integer time steps \"\"\" md\"\"\" Let's call N k the average number of bulbs that are still functioning on day number k , starting from an initial number N 0 . We can find an equation for the number N k 1 that are still functioning at the end of day number k 1 by working out how many fail on day k 1 . Let's call p the probability that each bulb fails each day. For example, if 10% of the bulbs fail each day then p 0.1 . If there are 100 bulbs and 10% fail on the first day, then 10 fail, so there will be 90 remaining. In general, if a proportion p of the N k fail, in total we expect p \\, N k to fail. Hence N k 1 N k p \\, N k or N k 1 N k p N k. In this very simple model we can actually solve this recurrence relation analytically to find the number still functioning at time t N k 1 1 p N k so N k 1 p N k 1 1 p ^2 N k 2 \\cdots hence N k N 0 \\, 1 p ^k. \"\"\" md\"\"\" Checking failures n times per day \"\"\" md\"\"\" Now suppose instead we ask how many light bulbs fail in half a day. If 10% fail per day, it's natural to think that 5% fail in half a day. However, this is not quite right due to the effect of compounding as in compound interest . If 5% fail and then 5% of the remainder fail, then how many are left? \"\"\" 1 0.05 1 0.05 md\"\"\" So slightly fewer than 10% in total have failed, due to the effect of compounding. Nonetheless, the result is approximately right, so let's take that. \"\"\" md\"\"\" So let's suppose that n times a day, a proportion p n fail for example, 10% and twice a day gives 5% failing each time, approximately . Then the number remaining after the first failure check on day k is \"\"\" md\"\"\" N k \\frac 1 n \\textstyle 1 \\frac p n N k Here we have used a subscript since we are in a discrete situation. We could also have written instead N k \\textstyle \\frac 1 n . The solution at the next day is N k 1 N k \\, 1 \\textstyle \\frac p n ^n. And the full solution for the number remaining after k days is N k N 0 \\, \\textstyle 1 \\frac p n ^ nk \"\"\" md\"\"\" Let's plot these to see what they look like \"\"\" md\"\"\" n n slider bind n Slider 0 8, show value true \"\"\" p 0.4 let N0 100 T 20 N N0 1 p ^t for t in 0 T plot 0 T, N, m o, alpha 0.5, ms 3, label \"once daily\", lw 2 N2 N0 1 p5 2 ^ t for t in 0 2T plot 0 0.5 T, N2, m o, alpha 0.5, ms 2, label \"twice a day\" N4 N0 1 p5 4 ^ t for t in 0 4T plot 0 0.25 T, N4, m o, alpha 0.5, ms 2, label \"four times a day\" N N0 1 p 2^n ^ t for t in 0 2^n T plot 0 2.0^ n T, N, m o, alpha 0.5, ms 2, label \" 2^n times per day\" xlabel \"days k \" ylabel \"N k\" title \" 2^n times per day\" plot t N0 exp p5 t end md\"\"\" Continuous time \"\"\" md\"\"\" Thinking back to the class on \"discrete to continuous\", we see that we are producing more and more discrete values to keep track of, but after a while the curve they trace out does not really change. It thus makes sense to define a limiting object , which is what would happen if you could take smaller and smaller time steps in the right way, i.e. take the limit as n \\to \\infty . In that case we could imagine being able to calculate the average number N t of bulbs that are functioning at time t , where t can be any positive real number. \"\"\" md\"\"\" In calculus we learn ways to see that \"\"\" md\"\"\" 1 p n ^n converges to \\exp p as n \\to \\infty . \"\"\" md\"\"\" An alternative approach is to look at the time evolution in terms of differences . In a time 1 n a proportion p n decays. Here we are thinking of \\delta t 1 n as the time step between consecutive checks. If there are N t bulbs functioning at a time t and we take a small time step of general length \\delta t , a proportion p \\, \\delta t should fail, so that \"\"\" md\"\"\" N t \\delta t N t p \\, \\delta t \\, N t . \"\"\" md\"\"\" Dividing through by \\delta t we find \"\"\" md\"\"\" \\frac N t \\delta t N t \\delta t p \\, N t . \"\"\" md\"\"\" We now recognise the left hand side of the equation if we take the limit as \\delta t \\to 0 , we have exactly the definition of the derivative \\frac dN t dt . Hence, taking that limit we obtain \"\"\" md\"\"\" \\frac dN t dt p \\, N t with N 0 N 0 , the initial number. This is an ordinary differential equation it is an equation relating the value of the function N t at time t to the derivative slope of that function at that point. This relationship must hold for all t . It is not obvious that this equation even makes sense although it should do, given the way we have derived it , but in differential equations courses we see that it does make sense under some technical conditions , and uniquely specifies a function satisfying the ODE together with the initial condition. This is called an \"initial value problem\". \"\"\" md\"\"\" In this particular case, once again we are lucky enough to be able to solve this equation analytically N t is a function whose derivative is a multiple of the same function, and hence it must be exponential \"\"\" md\"\"\" N t N 0 \\exp p \\, t \"\"\" md\"\"\" This is an alternative way to define the exponential function. We can add this to the above plot \"\"\" n slider let N0 100 T 20 N N0 1 p ^t for t in 0 T plot 0 T, N, m o, alpha 0.5, ms 3, label \"once daily\", lw 2 N2 N0 1 p5 2 ^ t for t in 0 2T plot 0 0.5 T, N2, m o, alpha 0.5, ms 2, label \"twice a day\" N4 N0 1 p5 4 ^ t for t in 0 4T plot 0 0.25 T, N4, m o, alpha 0.5, ms 2, label \"four times a day\" N N0 1 p 2^n ^ t for t in 0 2^n T plot 0 2.0^ n T, N, m o, alpha 0.5, ms 2, label \" 2^n times per day\" xlabel \"days k \" ylabel \"N k\" title \" 2^n times per day\" plot t N0 exp p t , label \"continuous\", lw 2 end md\"\"\" We see graphically that this is indeed the correct limiting curve. \"\"\" md\"\"\" In this context, p is called a rate it is a probability per unit time , i.e. a ratio of probability and time. To get the probability of decaying in a time \\delta t , we multiplied p by \\delta t . \"\"\" md\"\"\" Let's summarise what we have found \"\"\" md\"\"\" | Step type | Time stepping | Difference | Solution | | | | | | | Integer | N k 1 1 p N k | N k 1 N k p N k | N k N 0 1 p ^k | Rational | N k \\frac 1 n \\textstyle 1 \\frac p n N k | N k \\frac 1 n N k \\textstyle \\frac p n N k | N k N 0 1 \\frac p n ^ n k | Continuous | N t \\delta t 1 p \\, \\delta t N t | \\frac dN t dt p \\, N t | N t N 0 \\exp p \\, t \"\"\" md\"\"\" SIR model \"\"\" md\"\"\" Let's look at a more complicated example, the SIR model of the spread of an epidemic, or of a rumour, in a population. You are surely familiar with models of this type modelling the spread of COVID 19, and from the homework. As in the homework, we can make a fully discrete, stochastic agent based model, where we give microscopic rules specifying how individual agents interact with one another. When we run such models with large enough systems, we observe that the results are often quite smooth. An alternative approach is to try to write down macroscopic discrete equations that describe the dynamics of averages. Often it is easier to understand the behaviour of such systems by formulating a continuous version of the model. Some people make discrete models because they're not happy with continuous models large discrete models can also be computationally wasteful. On the other hand, they can also include effects that might be more difficult to model in a continuous framework, e.g. non local effects or things that \"don't become continuous very well\". \"\"\" md\"\"\" Discrete time SIR model \"\"\" md\"\"\" First let's think about the SI model agents can be susceptible S and infectious I . A susceptible person becomes infectious when they come into contact with an infectious person, with some probability. \"\"\" md\"\"\" Let's call S t and I t be the number of susceptible and infectious people at time t , respectively, and let's call N the total number of people. Let's suppose that at each time step, each infectious person has the chance to interact with one other person on average . That person will be chosen at random from the total population of size N . A new infection occurs only if that chosen person is susceptible, which happens with probability S t N , and only if the infection attempt is successful, with probability b , say. Hence the change in the number of infectious people after that step is \"\"\" md\"\"\" \\Delta I t I t 1 I t b \\, I t \\, \\left \\frac S t N \\right \"\"\" md\"\"\" The decrease in S t is also given by \\Delta I t . \"\"\" md\"\"\" There is also recovery, with a constant probability c at each step, once you are infectious. It is useful to normalize by N , so we define the proportions of the population that are susceptible, infectious and recovered as s t \\frac S t N \\quad i t \\frac I t N \\quad r t \\frac R t N . \"\"\" md\"\"\" Including recovery with probability c we obtain the discrete time SIR model \"\"\" md\"\"\" \\begin align s t 1 & s t b \\, s t \\, i t \\\\ i t 1 & i t b \\, s t \\, i t c \\, i t\\\\ r t 1 & r t c \\, i t \\end align \"\"\" md\"\"\" Continuous time SIR model \"\"\" md\"\"\" We can now go through the same process as with the failure model, where we take time steps of length \\delta t instead, and replace probabilities b and c with rates \\beta and \\gamma . Taking the limit \\delta t \\to 0 we get \"\"\" md\"\"\" \\begin align \\frac ds t dt & \\beta \\, s t \\, i t \\\\ \\frac di t dt & \\beta \\, s t \\, i t & \\gamma \\, i t \\\\ \\frac dr t dt & & \\gamma \\, i t \\end align \"\"\" md\"\"\" We can think of this as a model of a chemical reaction with species S, I and R. The term s t i t is known as the mass action https en.wikipedia.org wiki Law of mass action form of interaction. Note that no analytical solutions of these simple nonlinear ODEs are known as a function of time However, parametric solutions are known https arxiv.org abs 1403.2160 . \"\"\" md\"\"\" Below is an example simulation of the discrete time model. \"\"\" begin NN 100 SS NN 1 II 1 RR 0 end ss, ii, rr SS NN, II NN, RR NN p infection, p recovery 0.1, 0.01 TT 1000 function discrete SIR s0, i0, r0, T 1000 s, i, r s0, i0, r0 results s s, i i, r r for t in 1 T Δi p infection s i Δr p recovery i s new s Δi i new i Δi Δr r new r Δr push results, s s new, i i new, r r new s, i, r s new, i new, r new end return results end SIR discrete SIR ss, ii, rr begin ts 1 length SIR discrete time SIR plot plot ts, x.s for x in SIR , m o, label \"S\", alpha 0.2, linecolor blue, leg right, size 400, 300 plot ts, x.i for x in SIR , m o, label \"I\", alpha 0.2 plot ts, x.r for x in SIR , m o, label \"R\", alpha 0.2 xlims 0, 500 end md\"\"\" Time stepping The Euler method \"\"\" md\"\"\" Above we showed how we can think of Ordinary Differential Equations ODEs as arising in a natural way from discrete time models where we take time steps. What about if somebody gives us an ODE how should we solve it numerically? In fact, we do the reverse process We discretize the equation and reduce it to a system where we take time steps Suppose the differential equation is \\dot x f x The simplest such method is the Euler method we approximate the derivative using a small but not too small time step h what we called \\delta t above \\dot x \\simeq \\frac x t h x t h giving x t \\delta t \\simeq x t h \\, f x . The Euler method with constant time step is then the following algorithm x k 1 x k h \\, f x k If we have several variables in our ODE, we can wrap the variables up into a vector and use the same method for the ODE \\dot \\mathbf x \\mathbf f \\mathbf x the Euler method becomes \\mathbf x k 1 \\mathbf x k h \\, \\mathbf f \\mathbf x k , where \\mathbf f denotes is a vector valued function mapping the vector of variables to the vector of right hand sides of the ODEs. \"\"\" md\"\"\" However, in general the Euler method is not a good algorithm to simulate the dynamics of an ODE We can see why that might be from the graphs at the start of this notebook taking time steps like this actually does a bad job at approximating the continuous curve. Numerical analysis courses show how to design better numerical methods to approximate the true solution of an ODE more accurately. The Julia SciML DifferentialEquations.jl https diffeq.sciml.ai stable tutorials ode example ecosystem provides a large suite of methods for solving ODEs and many other types of differential equations using state of the art methods. \"\"\" "},{"url":"data_science/discrete_and_continuous/","title":"Discrete and Continuous","description":"","tags":["lecture","module2","track_math","discrete","continuous"],"text":" A Pluto.jl notebook v0.19.45 frontmatter chapter 2 video \"https www.youtube.com watch?v H6Dcx3YeTkE\" image \"https user images.githubusercontent.com 6933510 136196552 ce16c06f bd12 427f 80e5 aedb1fbc734a.png\" section 7 order 7 title \"Discrete and Continuous\" layout \"layout.jlhtml\" youtube id \"H6Dcx3YeTkE\" description \"\" tags \"lecture\", \"module2\", \"track math\", \"discrete\", \"continuous\" using Markdown using InteractiveUtils This Pluto notebook uses bind for interactivity. When running this notebook outside of Pluto, the following 'mock version' of bind gives bound variables a default value instead of an error . macro bind def, element quote local iv try Base.loaded modules Base.PkgId Base.UUID \"6e696c72 6542 2067 7265 42206c756150\" , \"AbstractPlutoDingetjes\" .Bonds.initial value catch b missing end local el esc element global esc def Core.applicable Base.get, el ? Base.get el iv el el end end using Plots, PlutoUI, HypertextLiteral, Graphs, GraphPlot, Printf, SpecialFunctions TableOfContents md\"\"\" Julia concepts printing using css fancy stuff not really julia pedagogical concepts curiosity based learning bridging what is often two different communities \"\"\" md\"\"\" Discrete and Continuous \"\"\" md\"\"\" An exact technical definition of discrete and continuous can be difficult, Nonetheless the idea of discrete mathematics is associated with finite or countably many values that are isolated. The set 1,...,n and the integers are both discrete sets. \"\"\" md\"\"\" DISCRETE MATH OBJECTS examples 1. Finite Sets 1,2,...,100 2. Infinite Discrete Sets ``\\mathbb Z `` integers ``\\ \\ldots, 2, 1,0,1,2,\\ldots\\ `` 3. Graphs \"\"\" gplot barabasi albert 150, 2 md\"\"\" By contrast, entire intervals or the whole real line is associated with continuous mathematics. In fact, mathematicians have worked painstakingly to define these terms, inventing fields such as point set topology that among other things can recognize the discrete, and analysis to rigorously work with the continuous. \"\"\" md\"\"\" Continuous real line continuous data image png base64,iVBORw0KGgoAAAANSUhEUgAAAWUAAACNCAMAAABYO5vSAAACT1BMVEX 8AAAAAAP e3t7 AACZAMzj4 91dXXg4P AHtwcHBnZ2f9 f8AlAAAlgDz8 v7 8AmwDx8fG5ubn5 f V1f 2tv R0dG6uv9cXP Pz 9lZf AwP rq 9fVsbGzx8f8gIP c3P Tk o6P9XV 96enqVlZUAoAD 4OD4 jz6P X1 8tLf87O AIednf9ycv Bgf8jI 9DQ0MAvgD 4v96ev IyP IiP9HR 99ff9aWv 0dH xMT TEz qKj srKZmf9AQP mpv q9 pbW1v ZWX AI Li7 dnZPT 7e01NTWhoaFISEj jIwWFhb seH goL urr PDz GBj lZVMwEz AHD wP h H n91pzGn9y 6xsbH XFwArAD 2u693r3N 83 Q0NzAKf w DV5tWP2I8wwDD j7YzoTP da67Xty7Q9yoQcuo4Kj OpL s8hgAMl1xnWezJ7Et8PET uMSsX S6v Hp3 h9J41njBS8jChPn On fKf AGH XKO6hL8AGgAAegDMAAApAACZANlaAJEAAF0AAKKNADtxAD4AQQAAzwDaAABMAACZAPoAAM2pAQFRAHxjc2Mskiy2SkqjZmZmZndSUsdaWpXZNIb qP nbljrmP ZMBRsFHKgdfenP S1ZKzmNfJcdu9 71j3mOI9oi7D S HMnNd Ld8asd LOYsiPJ8mAxID Qra1T v runPZO PAN7evtzFi WNAL3bt ZstqmftLyi e7OsWcAJai 6LYhdDDUMX0Xau1AAAZuElEQVR4nO1di18TWZauVFJIpJIQqPAKRMLLEEhiEgMBCSAQeQXloQF52ARQ3gwg2LRA6yzuztqzs7Pu7G7PvqalUQdcsW1s7LbRGbf1D9t7KxUIUMmtV3q7Z LVLyQkt6pufXXqu ece sWhrGDqsuJ8Esc4XDkilmbwvEzElXkLxkOHE8QvjbpwK1cymkShe jJ4 EXGQRPe7QCN4 mY3j5aVRi2jOGCtxgHL01hIK0GVKKXQZN7oIQBaqQG6GHq9AWGCd1QoPLjMverG8ejyD5FQrNlAVuMWJR6U5C1TCWd K12cjtpVViOujnzAM2kQOimYd2GEFajtYMm5E7ExzBvKXH7WMGxpQa6sRRxycHs syuBgH ygcEsWbmyIVkSTVlFagDXgjuhbSshpxY1omu1olo24xYIjDVXTaoluf4l23OJwoM5XmqMuEUtz6qMLYl69Md Cc7hSWQEEoxXDjUgvA5iFHrGPNCde3lCoR1x5gOXy5OgldMBIG3AcVaXcVkS1dVZgx1m4Ht1o5RhRhSrw7BxhLEPxoyqdiZrILGtKNbRtJgCzKEdcU3W4PUHXaokiqTrYfOQjbTkTr8Mw3InSDKoCwXKCI78A2DNSe BFaEeZMl6QUM XZXdFPri8z2BkBl6Zp8Hxc2yFCiocha10mwdIhojo8CW4wf7TzuXBK4 dlvPO5OuduL0AsoyyZVpKnQg9BSw70Jdg0J6jw11IH1xUGwKNKJXG15bdrfSGG6CvjFeBl8XOUqoUljGCXxL0QOAaytnrW5CTby 0MMebj9exU5hhob0UUM0MJ8qWabFw4oWIgwAWgmYZCCLCX0nIt1Tq86vw CjnPqcSL3Q6cb4051vsDQ2lOowy0nTjRraWLc9qP9eQAwWrIKcAK7VaWA8qh95ABb3 HGN9hEYruzWz7ow7C0hGmgVhy6AxdkOW6xDHwIXlLIslDZSMWqZAp9Mk26PacmIlQ1MaPy9DF3wjdboGXZ3TmcN6nZNhYpVlYRe4grSKioZsHU2cu8oI6prHesITQ VLQ9lyKW3LuFEXtRSoXZoT1dLmgmuLStNXolxQoIhRhblUl5OV02AxorYTDRQHHwOQbEdeLmnOfE223pgRvRDKloFiuLFWXI am8bB3pyEwY1b9MAM2S CA4AmshJ1TkGpQsGeHISmEMmyG dAsrvS6igH hud5QzLOQTLdryqELeg9gadUIT7kJyP4 WZ gaE6w1cNHt2LnJ wM8QkcjAqHwORoEmOeEcCKLs Q2IqiRmosQtDzQWaJIBida06AXceGEWhba NKudC32JVThPWT4MjRFRXUzD4VrJyqzUJeeiy Uhq1qaxylJSKFkWaPjdIkncMwC5VsRF GPgoLc 8axBFHHHHEEUccccQRRxw Q6Rw6ZhNSflRC0laKQ6bIrkV4lT1w3sPvV9KRxeWJ53msMXTpzlU4 IlOboQdjaVw 5OnuJQ6GIRh 2lFnEgIf3CRxGOL JJSili1kiXFXHYgewEuhB2 gKHup6UcTjqdNkFdKEU2VkOhU5f4LC 0zIOZzW1oygCy lFH7HSLC quMhUQ3bxyG9mr9drPrIZLqcipSjKARl8Pp8BfjjBjeWDayeFKinJZcsvRWKZTC4oSA6tkHL6LIdTf5FhmQzVkg3ytkgsY20yFjNPkcs6ZMzOjxE4ttijGrh1mGZOLGNRzMZXO hvrC3G LNMfty7t RJb8nxQhFYJnV2qzGzgUmzcbNlhmXDtenbyytDBvbrP7UjkiLK22QdZ4 8RqYUyQA CtX1sC2PTbi0avXU6iGaxdqyp0YB0ejhzTLV ykBsXTcmtlZJt1W2JVpqQiuwM2Wg4pB9i83KW1N8 0spxRWqo1dFzBoyzLZWXn4rykfnYUkR7DlMZXK5FKrTa7FQzvgZsuRGlJDiyKIRh9flnuXiCDuHCvEzrLOEuwHZfrb djy6F2l0qZsUi6PsrIZWZflbTSjYaoRNOQDWyYP2bJ5UW3S0svUSNjXHG25LQLL3X6GZYUHK LH8h2a4j3wOnbkrCwHR8ZBFNIpfvIiZ1smf k3V21K2 Ly1bUhtkJRdZnGWcbXSJGfZUiWpcpppMuS5AcY6zG5gsvUD2Ffp8pOydEoupTK kP7Psvd8iJZhELhSJUVMZ ChnwDvO4dLZQuazu Zp4 xLI1jf7i4oV09P5Oyy7K5TdvA0uml6ZR1kq1nYy0KYZl2VlaU1JOyKLjbwNqtdYEXlr13yGK8sCvQiQrfvX3PFe9H6QZvH3Gqfyv8X38A89d aZpmaG56R95rnqAj Sw6UHgt 8ENRm8JkwxYfnBP NclWH5dwJY heeu qNLWTLy8JZhlKX1HHwbwdbmd 6gqqsDbhiwvK 8rVl4v4e0 z9G6fyvzYKt WrNuhjwEUwyx10OHr6gOcLSSfAUpQku1REf6KXzzdCuvz7z5NOnAotSR1tJ0 eOrIcw6WOC T70YKn j2kyw 42SbLOnUiaRoS1FS0SlZWxF8T r8k999xrB86vMj5U6CYzr0Dazqf 5XiGTLf8N9J13quHQyUoX30Sa7cPLzk38I2fIfTp46cXiBm7 QcSlChU FSL0UarRPX2KsmD32G1EFddl0yJMDzSu6ocYuRnKaPIMMy83F3HwMbN H ILhmNg9ViZFdollzYwQy3Y6LiEjupfhCPrLD0OS0claSN72UaT1g61fx4mDQ5MnBb9jjuOIk5aybgrq8lz4tyL9Zay2OUhyt4Gvv1z2nFGMN8cKsfvLBeVBkluDQ9r4 MtDa1AwmmxfsjpyWGpETy7oY7QdzqgFZaMoVNfDsZ95YEqtmto4RLJYfxnzdQ82K5oHaw38I yyRzMEsTPzmGV 7BF2sqPeiFv0zLjBFB62jI1 uWxr mblGvuonPTo nLS0YST HRbJFsG19jwk1vDY0d2IDaPgXlqu2o98APvbFFe2YvHfyxjKRQpW6TJyXc0hMYW8svJ5d7sX7kWKYyOnsdgS7CmFkWyZVaIz8ntgzfLkffHLfPJw5YRlWq7GOkEnO2IUN8TjJRzSh2L1eUwcMwvS8Yyp1MvMr8sL4pYXWbnJBf3Ib2Ny1EXccnin 7gwnIbhwss5WwSh0LcWr82DizLL0TsC0LvIpVL508qB 6w9FQOPVIpFzkUkqdyoIbkVCk5h8Pjtj95arrwe1fjiOMvGST PvGYwst3BZLChN7 T5UMlfwYyuD1jo2hS FBxB5LDihJLinp47kOlZWTnSFw3PzoyvTKaOx57ttaX53rM6MLcoXBd9lTLJjo3s3nz3neNEPq9LixqkEYzZPzy7bbK2xhkJQwbz1VB6b ZwRdkis87TWNLR6BK2vePyO2P2Hv74yE5DMgyDZmCqK5eK3JplQ2rcRYNszjLm3ANDEu1fYMvu4rMFFULGz1jHcEQew89 FZJ7EKZpmF0dwZzDE3rfWz54wkwnAgYHKZAuu8Wxx2GDztdEKu8bIgzdA8pzNyz77i05i5mdt5C8 wp3mS7pKy2ZTLvxyKmTWTY4uBgDagNZlWJaEZkHyFzuFfqeVljiE0MOnl7V7u6 TWBUnG8Ure1kxO011SsAdQuXZTTKsdDSnDPVoX4HnCNDEnQQNoqO5qVjygaW4RwnJJMLu8QxB3OEszqSuEFButTgHWXLamnF eb7q9Ng keV5oY4JC33pAHZgIqKa0gYER0V6zobrR7 c3N sBz4MCquyFOfxtYnvnPrF3h6tm5NYZjU6L0Vh1ToA1j95WNs0DVR6d gbY88PYGLN5XO2amNC6ehZNAfUilzxBNECSFQ uX2l 0Nys8Hfzr LrJYJYekdszyztETuvcjmtA9w4o8Va7zQ6SsuBRev5TQMwOq cX7urvDs01P l7duvhE9tFg3DE9qJp PqwMDwgEk7cUucZhg8LcCGa1pqwJ rfn8Xby8DNn1L38PuqLc7xM6317itlGPBLXbgMDs07kwjcg6SI1UGjd dyTXb Csqt NV55CY264jom8xoO15Mqd1DXhvTQRcG3xjrsPw1V5RNNecB38V3UCeB3l7Ga8AwZtvnxE7f8Q2gZ xR04rJTtwvDAj32i0J2jSHJV25FRe4Riavmpbuzxta rPxUrIyKNsxcC81QN0YvgJsGWv Ukg0DMsanOGyzX xvO bqAW1eAjb8lI vYGMTs0tA27VstmiO3vuaxEwvnhyhPzgVbogHrkZPCa0bHsS6VtsnhSqZyOnbds3gLMbsmhLZsx7 LAS3HpDJ vtv2yobjLr7he7Bl84G k2f4VAJZfYIBlYMvYm92v33NZicq24sYzmgqnEfZiU8kUr9YPNH7zN7Gb88q1zlh5cYDliZ4nXvOqSjvgxcx9w8NinQxfMYl5GqEXVwxik Zqfmt7N3e fYP13r8PhwmUvXnNSZdJtxPPzKIajHg9ajYKFoyuXQVWDJpAKBmxQt cyBjmXQ1oB2C7Z5YiLjHUXlf4232G8zW8WZa eXstAXv7bAHaMlaGccrgUFkVFTm5ZAaO1wuY73h0cvrVkGH0S5tyWlAQxR3m1QDQZam2Zmj3K2rOG7Diluaaap4hK03rtW3i2fEhL5FBFhQAkSi14KiJYNhQMnQT BVDK01K9jHM0sH7VB14KVni09cCBMNjgCMyugWZx9ttYukt77XyKnFn1LlLIwH6Fb5OIBk3hazNHd5FtXpRKlsGfoZC0U7T6xOWY3Y I37Bn XETNyImo8uMoZu25QxivtCgCy lGpjBuDHNdeKqfCjZ8S2IJbxc4JjirIvm5Qr HLafOHt0QakY7nL7 etx4fwiCDu82cZDkrkNLEWKzT988pvYivMkGXJFMMz6BeWjduHMJbhTHJ69ER8kXDz9tXliAPmJIG3R6Uel4rl81dECgZQjIVt maVXIEbW4XPFzm0dtXWH5tUEQPAslaq ijox10XJRgCWdY04Dhyds IMDy0KSMMY5YIQDEk6 UrblT4GwX2 DHY3CN2 R8vDEtEsAyD7OUhCfvxj8E7IR3L1TUKvzA3eR bBLErQL8EhiUhwCD7ZmxZlkwxoB nuCxuG5t7C7sCnCodYFlQWBIEDLInYxlkA5an5tDFuADm42rECQawZaEsO4WHJRi1smxbE1nzqICKIRHL1dCPE80yy 1RaJTW48YKEV7C5LLt9mgMwz vlGQsw3ujxPlxglmGIfY5Ec9kGl2zLcdspAAGWVZPieskCQH4cQ8Gq8Wy N2CEJYTRAV wGNesTX9MobCDHVZGpY9jX5 i0dkCPXtd4JsmQ7 RLBsWFlW3h2NSe8qBCV3aSekYVkCPw7DZoQpBgxLEA8tio5rt5XzMRopAEDKTdqJLUk2dfmK4opYWcZ2CWJGwGowLCnk1X99BENryqYYBtkjAYlaP DH a z7IU6jhnixrdC1svCRYUlmGHappz2xKr9M29pJVIMKBhdYgWjbJPYE2LLkGWLiLAEwzrnlWuxGigHh9ZqRQ7EYHD gPxgqGZJQhBtgzCEiPqCVJRMTofQ4 ZPGfS9ogbVMTg8nWFeMEo 1SYLovskwLwrczHMC0nmS1Xt9SIFgysZPM7gtOgoqNIzrcWitFl0P5Nxs6TI8cmXBuS3FXiq66VQNd2v9vmNkDuCMgEwbdJhTAUu9iPHBtfnZPmTjSDFLHT5uOvuA32PAYypp0dIpHi9Xp QndVlmhKYtubHEccccQhFj6WJZZZ Z8tqMQEViRycT1GJ6dpTIa9T8ZuVBcl75P43nfBKHtd9rr30CtaaSpDr9dnZh59ZVY5kI fx2BfibIpfLkLXlfnpRg7Tsr7jgZ9fSNPXm5sSJMIFQtydnZm9hdhr91H0YofTBJ8BJlcUnWdy7ampuWmJltwUQbf 0WFKcN98r7h4ScvF8fD7Nbc13fr6YZWqzKtcpnPkA2 6svSpbXIZzeYWYJDr9loxQscuLOySl9IL1XMkgkWRzKHkQeezpX 28vKten FbDcnr86 fDVyqgYn9K82rM sDE1BQidWj8g9NbqhsqkMgVUpnEBp7C6 3xtd1eNyPFbh D8xaM7j8JfUUPvvFZc7wYqfHRJLMA4DLQwUD5N513lw2KNT OjVpS2mz6NqKwGmW4KuEwqdUDVY3JNhTTDO94DrHhiYG54 JaAUSeeRv VZnhrsICbKY BefJnCYhQcsOW5KimlWVEPfwWhYfzVzuD9jXZFPokHHKV2tTTM7c19lIdeLrPco9JPfVky2um E9og9FjtxSKKzXNUrD8 hM tzyEkIWLZbl 2bYSTBJ03rWJ7tA2j78cA3Sa0ydU6iehq8nbo1ZvyIUPYqqura2uvjwoeqQAAHFjV0A qRs3cnpGbmRMLl9l qQOrFoEvF4oVSPAeg9uCvYuqtTrIrZsMBhgd0mz LRcGbFHHEkYlb5 hJzKwY3Xhz YuyAtA XI4aPon1cyFgx1WZr2xTwQmLh18K 3x2VaFbvN881XBLFc9vrNASUzxMJSuPP19nt49 smahtZzKDP5LSMjIZye2altTL649CPYVIyXd53kM0DarV2Y3XfkwO6DAclAgdPRFDSreA5rvbN6zfvH8 MzM7uzO5rMXxayf4hln0 M0s jWAWcftfcgWemQi85oxMq9XKPMREz8 a 5ebRNuyvG98fH19gxkUMP7U5NK61Kb9mZfHptRTA vrPRNTU7cibgOFdgW 8RiPd2c 2SMIOEv7Z8 Y794QxN7 yJkXs8BP3rux9O7ZJmI0TYIdr3IHxxjBiV8qzzlwnhMMYA X921ZoC4Pr2 AgEOt0j6F 5nXTSa1SaVVq9XrTIGxgEqtVdEvreCBA108ByPuBp8A8yLtA7F3n luhyC n5mhLZf8E x9JyO5pKQMFSDoLLTpkmk47rRnJxYk1AGfgx9T TabSFv vVrrAhy6VE9g7dN7IJfesUWXtocJS8YC4Pep1fThCVdgQGjs18XTlv 8sE18UVJSggFVYJq31zsL25vEQrCHtfcGsVBSwomrLNxZAccWafLyEpNJjMqx4Faeg PF63IP7SNvbQUfMpey1XMLfPJOaLWrwa2Zt1ymgRGvl8SGtdoBgX3avkaejlxJQpDDFwTxjlGEdwSR TWwb qfx8DSOU6oB1gOd TcRrw1jeeQPaDLIv3lrblU By kONmptm FXDtPz KOzwSPANjKrXQdFF1jULQUAFA8p8ZRSj7X0DwB4Zl8nug19w2QeXg9QemS6VV4lXZuTx7W4GXLNJfNpuP9 3dAva977yRKcEzYJ4DLAu05WK thzEe4L4EHKQP90D0nEnxDIw6q hB7Q9a86E3b1D5ViBOlcW1uXyqke UqwuHwOZvjil1v5wLNjzPnWpVwWyfP6KkAD7BZzbbHb2C0j0W4JYwrB7IZZ3F4ivsLdvXjx UYYgusBxwLIus56Zx4 fZA7S5jFo3OoBHsbqMZKpYZNJ8HDmy828U3Jld2ZCD4KBLAPjBd7X4xDLMNs5s7MD3xCpjQI7XsiwnGWln8VTCKgu56UZUvjLh0Cmu4Arx1iy Yd91808sqFWCb4r21B9nm9f2TXgDz8j7nzYWaC1AU7A9f7NLPTu7uRh5DadV17a244alWgSqITEVjoogShtxS3lWclZ tCjFblCvL98BOY54CozSQzziIm5ScrcNzKgVYmZiou3Aeh29j59nqzBgo n IqeGHEn9PgdaMtf3 vtLXkOvo58c7Ymu8GdWInbGZZJd34WaMR0lTjOL30kuS6bt15ObTHuhfmlykQnQL0 bAxo1RM iN88d5D3ejUaugF89jHwn2EUuEBzvLBzDyOfE3eukRSFlSwQC19E3EaBw rICMsukxoSRtq8I wwf3m 6ZUUumw2H7h1YxPBtNEYjAUluyebIyh4NCCqJt6B6vRuEx8 LH3YhpYNn7yqSdbQB0uBL1geesQA BdWu GQu6xJK8TDXTtO6Jz hrFgz y8JCwfgjeYIOoLqFSmHzjMQ1lc293VyH uw4j4ExRieHxkmuZjqtdwD9B8aKL7a0AxIo e0zTgRsuhoISiSc7gGZV4Om8ykWtZ70oMBtkGq Md7xkYMaOq5mkcrKHnSz0f qa2pfH4MtjONdYuA3JBfBoklQJVobBrR0I Cih1tMxnInz6apjlJlRY8cPZZm6gyP0PMbz1LyUd3VdSXRN6EOU y 3wP RhfNkJGW gHJx6Pp0Ly0Q4Y3dW8By1JlJ4DzXhfssaxqcOJ5Z pN9pguHigWfKN7c0lW7rxjtCjY0RmW57OuQBMDHjN87LILQt3h 8G WDmKQAJYHbDdz z40eO9fJt Okp8Wimsba4s9BroDioHBU3x0qQZL1M18AZQ2SC2w23dHW5ol8GvwE5n1he7bz4id6Oc wW7cd QAKHdOzEbV 0iQRrJAeLcXZILq7T1GCQixPwQ Ubu0 4waOA7iPUd4HX yavEj496dkAvAQgn1cS zJbUffEdF7pkqcTeV Fzgu8zrRneSimpv 639Oy4kQ7f7r8J8i7v8YqfGYIXmz d 7horIXyNPHujuOKvw0g5Qmg SRx8UF0j8EEwcfBAt0LYsKI4 CA0rEj4M fiQKOdZrn4 KCEw8TjOIp2umMVzpERF47YoZ0evNXl90sxgjmOCKBZrm2 3ijkAVJxcES74roH KltUcQVI3YAZuzBuq5318RZjiGqrytaamtqWuKCEVO0KxSwN1DkJNdxIEB3TMUDwFgDdrzGSY49fDGbXPAni 8DqSQuwvSdulEAAAAASUVORK5CYII \"\"\" md\"\"\" Heard in the hallways I only like discrete math. I only like continuous math. \"\"\" md\"\"\" Indexing and Function Evaluation Analogy ``v i`` ith element of v vs. f x evaluate f at x These are different, right? In the one you are extracting an element, and in the other you are applying what in some high schools might be called a \"function machine.\" However, a moment's thought tells you that a vector is really a discrete function, in that the argument can take on the values i 1,2,...,n and the evaluation is v i . That's a function. In fact, think of a range object such as 2 2 20. You could think of this as just a shorthand for the vector 2,4,...,20 but in fact when you index into this \"vector\" like thing, you are indeed explicitly evaluating a function i.e. i 2i. \"\"\" 2 2 20 this expands the \"iterator\" into an ordinary vector 2 2 20 7 Extracts an element from Memory of course there is an address calculation 2 2 20 7 Compute 2 7 more or less begin f x 2x f 7 Compute 2 7 end md\"\"\" Any which way v is a function \"machine\" whose input is \\ 1,2,3,4,5,6,7,8,9,10\\ \"\"\" gr md\"\"\" Area \"\"\" md\"\"\" Area of a circle using regular polygons \"\"\" md\"\"\" n bind sides Slider 3 100, show value true, default 6 \"\"\" area s s 2 sin 2π s begin θ 0 .01 1 2π plot cos. θ ,sin. θ , ratio 1, axis false, legend false, ticks false, lw 4, color black, fill false plot cos. θ ,sin. θ , ratio 1, axis false, legend false, ticks false, lw 4, color white, fill true, alpha .6 ϕ 0 sides 2π sides for i 1 sides plot Shape 0,cos ϕ i ,cos ϕ i 1 , 0,sin ϕ i ,sin ϕ i 1 , fill true,lw 0 end title \"Area sides 2 sin 2π sides ≈ area sides π π\" end area0 area. 2 .^ 2 10 Area of polygons with sides 4, 8, ..., 1024 π md\"\"\" A carefully chosen convolution 1 3,4 3 \"\"\" area1 4 3 area0 i 1 . 1 3 area0 i for i 1 length area0 1 function colorgoodbad should be, given indexofmistake something findfirst collect should be . collect given , length given 1, htl \"\"\" span style \"color inherit\" given 1 indexofmistake 1 span span style \"color red\" given indexofmistake end span \"\"\" end colorgoodbad string float π , string 22 7 area2 16 15 area1 i 1 . 1 15 area1 i for i 1 length area1 1 md\"\"\" Another carefully chosen convolution 1 15,16 15 , do you see the pattern? \"\"\" big π area3 64 63 area2 i 1 . 1 63 area2 i for i 1 length area2 1 area4 128 127 area3 i 1 . 1 127 area3 i for i 1 length area3 1 md\"\"\" Why does this work? \"\"\" md\"\"\" Area s `` s 2 \\sin 2\\pi s \\pi \\frac 2\\pi^3 3 s^ 2 \\frac 2\\pi^5 15 s^ 4 \\frac 4\\pi^7 315 s^ 6 \\ldots`` as `` s \\rightarrow \\infty ``. \"\"\" md\"\"\" Area s `` \\pi c 1 s^2 c 2 s^4 \\ldots`` Area 2s `` \\pi c 1 4s^2 c 2 16s^4 \\ldots`` \"\"\" md\"\"\" Think about taking 4 3 Area 2s 1 3 Area s . Now we have ``\\pi c s^ 4 `` as the leading term so doubling the s approximately reduces the area error by 16, when before it was only 4. etc. \"\"\" areab s s 2 sin big 2 big π s begin area0b areab. big. 2,4,8,16,32,62,128,256,512,1024,2048,4096,8192,16384,32768,65536 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area0b end end begin area1b 4 3 area0b i 1 . 1 3 area0b i for i 1 length area0b 1 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area1b end end string area1b end colorgoodbad sprintf \"%.30f\" big π , sprintf \"%.30f\" big area1b end begin area2b 16 15 area1b i 1 . 1 15 area1b i for i 1 length area1b 1 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area2b end end begin area3b 64 63 area2b i 1 . 1 63 area2b i for i 1 length area2b 1 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area3b end end begin area4b 256 255 area3b i 1 . 1 255 area3b i for i 1 length area3b 1 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area4b end end begin area5b 1024 1023 area4b i 1 . 1 1023 area4b i for i 1 length area4b 1 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area5b end end begin area6b 4096 4095 area5b i 1 . 1 4095 area5b i for i 1 length area5b 1 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area6b end end begin area7b 16384 16383 area6b i 1 . 1 16383 area6b i for i 1 length area6b 1 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area7b end end begin area8b 65536 65535 area7b i 1 . 1 65535 area7b i for i 1 length area7b 1 colorgoodbad sprintf \"%.80f\" big π , sprintf \"%.80f\" big area8b end end big π md\"\"\" Area using inscribed squares \"\"\" bind s Slider 2 40, show value true let plot for i s s plot i s,i s , 1,1 ,color RGB 0,1,0 ,lw 1 plot 1,1 , i s,i s ,color RGB 0,1,0 ,lw 1 end P plot cos. θ ,sin. θ , ratio 1, axis false, legend false, ticks false, lw 3, color black plot P h 1 s a 0 xx floor √2 2h x xx h y x plot Shape x, x, x ,x , y, y ,y, y , color RGB 1,0,0 ,alpha .7 a a Int 2 xx ^2 for i s xx 1 , j s 1 x i h y j h if x^2 y^2≤1 & x h ^2 y h ^2 ≤1 & x^2 y h ^2 ≤1 & x h ^2 y^2 ≤1 plot Shape x, x, x h ,x h , y, y h ,y h, y , color blue plot Shape x h, x h, x , x , y, y h ,y h, y , color blue plot Shape x, x, x h ,x h , y h, y , y, y h , color blue plot Shape x h, x h, x , x , y h, y , y, y h , color blue plot Shape y, y h ,y h, y , x, x, x h ,x h , color blue plot Shape y h, y , y, y h , x, x, x h ,x h , color blue plot Shape y, y h ,y h, y , x h, x h, x , x , color blue plot Shape y h, y , y, y h , x h, x h, x , x , color blue a 8 end end xlabel \"s s\" title \" a s^2 a h^2 π π\" plot end md\"\"\" Imagine you didn't have the idea of area \"\"\" begin N 1024 h 1 N v randn N end bind j Slider 1 9, show value true, default 6 J N ÷ 2^j begin plot c 0 cumsum v . √h plot 0 N . N,c scatter 0 J N . N, c 1 J end ,legend false,m o,ms 5, color red, lw 5 plot ylims 2,2 xlabel \"time\" ylabel \"position\" end md\"\"\" A random walk is a discrete random function. It is defined at grid points. Brownian motion is a continuous random function. It is defined on an entire interval. If one has an instance of a Brownian motion, you can say its exact value at, say, .7. If one looks at the random variable that represents evaluation at .7 it is a normal distribution. \"\"\" md\"\"\" Alan's essay In what sense does the continuous even exist? The fact of the matter is that there are limits that give the same answer no matter how you get there, and these limits are important to us. For example, no matter how you cover an area, by little rectangles, the sum always converges to what we intuitively call area. The normal distribution is interesting in that no matter which starting finite distribution we might take, if add n independent copies and normalize to variance 1 we get the same limit. Again, there are so many ways to start, and yet we always end up with the same thing. Continuous mathematics is full of so many examples, where discrete objects end up behaving the same. Indeed what happens as discrete objects get larger and larger, their complexity gets out of control if one wants to keep track of every detail, but they get simpler in their aggregate behavior. \"\"\" f x,t exp x^2 t √ π t bind t Slider .01 .01 8, show value true begin x 3 .01 3 plot x, f. x,t , ylims 0,1 , legend false end begin surface 2 .05 2, .2 .01 1, f, alpha .4, c Reds, legend false for t .2 .1 1 plot 2 .05 2, fill t,length 2 .05 2 , f. 2 .05 2,t , c black end xlabel \"x\" ylabel \"t\" plot end plotly md\"\"\" Sum and a Definite Integral \"\"\" md\"\"\" Cumsum and an Indefinite Integral \"\"\" md\"\"\" Discrete Finite Differencing Filters and Derivatives Gradients \"\"\" md\"\"\" Discrete and continuous convolutions e.g. probability densities \"\"\" md\"\"\" Discrete Random Walks and Brownian Motion \"\"\" md\"\"\" Binomial Distribution and the Normal Distribution \"\"\" md\"\"\" Discrete and the Continuous Fourier Transform \"\"\" P binomial n,k for n 0 5,k 0 5 P P' begin A 1 . beta. 1 6 ', 0 5 . 1 1 5 A 1, . 1 round. Int,A end function blue s String htl \" span style 'color hsl 200deg, 60%, 50% ' s span \" end md\"\"\" It is not unusual for students and professors to gravitate towards the discrete or the continuous. We wish to point out, that the discrete and the continuous are so closely related, that it is worthwhile to be comfortable with both. Up until fairly recently, much of computer science was often associated with discrete mathematics, while computational science and engineering was associated with physical systems, hence continuous mathematics. blue \"That is blurring these days \" The popularity of machine learning has brought continuous optimization ideas such as gradient descent into the world of computer science and the impact of the physical world on us all e.g. climate change, pandemics is motivating applications in computer science. The newfound popularity of Data science and statistics is also mixing the discrete with the continuous. \"\"\" md\"\"\" blue \"Continuous math often lets you replace complicated large systems with lots of details with a simpler abstraction that is easier to work with.\" \"\"\" md\"\"\" blue \"The combination of continuous and discrete is often more useful than either one alone.\" \"\"\" md\"\"\" blue \"Machine Learning, Pandemics, climate change, etc. show how critical continuous math is these days.\" \"\"\" blue \"asdf\" function pyramid rows Vector Vector horizontal false, padding x 8, padding y 2, style padding \" padding y px padding x px\" render row xs htl \"\"\" div padder padder htl \" span style style x span \" for x in xs padder padder div \"\"\" htl \"\"\" style .pyramid flex direction column display flex font family monospace font size 0.75rem .pyramid.horizontal flex direction row .pyramid div display flex flex direction row .pyramid.horizontal div flex direction column .pyramid div span hover background rgb 255, 220, 220 font weight 900 .pyramid div padder flex 1 1 auto .pyramid div span text align center style div class \"pyramid\", horizontal ? \"horizontal\" \"vertical\" render row. rows div \"\"\" end pyramid area0,area1 , horizontal true pyramid area0,area1,area2 , horizontal true pp x colorgoodbad string float π , sprintf \"%.15f\" x pyramid pp. area0 , pp. area1 , pp. area2 , pp. area3 , pp. area4 , horizontal true "},{"url":"image_abstractions/abstraction/","title":"Abstraction","description":"","tags":["lecture","module1","track_julia","track_math"],"text":" A Pluto.jl notebook v0.19.45 frontmatter chapter 1 video \"https www.youtube.com watch?v 3zTO3LEY cM\" image \"\" section 2 order 2 title \"Abstraction\" layout \"layout.jlhtml\" youtube id \"3zTO3LEY cM\" description \"\" tags \"lecture\", \"module1\", \"track julia\", \"track math\" using Markdown using InteractiveUtils This Pluto notebook uses bind for interactivity. When running this notebook outside of Pluto, the following 'mock version' of bind gives bound variables a default value instead of an error . macro bind def, element quote local iv try Base.loaded modules Base.PkgId Base.UUID \"6e696c72 6542 2067 7265 42206c756150\" , \"AbstractPlutoDingetjes\" .Bonds.initial value catch b missing end local el esc element global esc def Core.applicable Base.get, el ? Base.get el iv el el end end begin using PlutoUI using ImageShow, FileIO, ImageIO end PlutoUI.TableOfContents aside true md\"\"\" Initializing packages When running this notebook for the first time, this could take up to 15 minutes. Hang in there \"\"\" md\" Introduction The goal of this section is to introduce you to the notion of abstraction. You can think of abstraction as an opposite to specialization. We will illustrate this by looking at the following example. What is one ? Before we get lost talking about the foundations of number theory, I will present you with a few examples that represent one to me. \" md\"Each of the items in this list is a specific, or specialized representation of one 1. as an integer 1. as a float 1. as a string 1. as a rational number 1. as a cute picture 1. as an 2x2 identity matrix 1. as a singular dog Of course, these are just a few examples of one . People have been representing one for ages in different languages, scripts, artistic expression, etc. The difference between these ones to me is clear. In fact, I just articulated it to you. Now, let's turn to how a computer sees one differently based on what I type. \" md\"So to a computer, all of these are different types.\" md\" What is a collection of one s? Now, I want to make a collection of ones for some reason. Below is a way for you to experiment building this collection with different one s. As you do this experiment, I want you to look at what stays in the same in the Julia output, and what doesn't.\" md\"\"\" Before we even look at the output, I am amazed that this code even ran. Are you telling me that the computer doesn't care which one I am using in my array? Yes That's exactly what abstraction is. By stepping back, we can now think and operate at a level that doesn't care about which specific one I am using. This is what we mean by abstraction is the opposite of specialization . The information that Julia gives back is quite informative. Here is an example of the first line of the output for a few different types ``` array 3x4 Array Int64, 2 array 3x4 Array Float64, 2 array 3x4 Array Rational Int64 , 2 ``` Notice that for all of these, we have the same `3x4 Array , 2 `. \"\"\" md\"\"\" First Taste of Abstraction Now, I want to do something to a collection of ones, that doesn't care about which one I'm using. So I'm going to write a function that takes in my collection, and add a corgi whereever I desire. \"\"\" function insert new, A, i, j B copy A B i,j new return B end begin A fill 0, 3, 4 md\"\"\" bind i Slider 1 size A,1 , show value true bind j Slider 1 size A,2 , show value true \"\"\" end begin one number array fill 1,3,4 insert 5, one number array, i, j end md\"This is still amazing. I wrote one function that just cares about how to insert an object into an array, without knowing anything about what's inside, and it worked for two completely different arrays, collections of ones of any kind .\" md\" Conclusion The key idea here is that a computer language should allow you to do operations that make sense. Often times, an operation can make sense for many different objects. So we can abstract away the specifics of the object in our implementation. It should let you step back from there. \" md\"\"\" Appendix \"\"\" begin oneimage load download \"https user images.githubusercontent.com 6933510 199281680 5ac1e8ea c68c 4fb5 a3bf b47ad28057d1.png\" corgi load download \"https user images.githubusercontent.com 6933510 107239146 dcc3fd00 6a28 11eb 8c7b 41aaf6618935.png\" nothing end one 1, 1.0, \"one\", 1 1, oneimage, 1 0 0 1 , corgi, computer ones typeof. one begin one keys \"1\", \"1.0\", \"one\", \"1 1\", \"Cute One\", \"2x2 Identity\", \"One Corgi\" selections one keys . one keys lookup element Dict one keys . one md\" bind element key Select selections \" end your chosen one element lookup element element key its type typeof element a 3x4 array of this one. array fill element,3,4 begin one image array fill oneimage,3,4 insert corgi, one image array, i, j end "},{"url":"image_abstractions/images/","title":"Images as Data and Arrays","description":"","tags":["lecture","module1","philip","track_julia","matrix","image"],"text":" A Pluto.jl notebook v0.19.45 frontmatter chapter 1 video \"https www.youtube.com watch?v 3zTO3LEY cM\" image \"https user images.githubusercontent.com 6933510 136196634 2294d0a7 e79a 40d0 bbb8 81da70f4d398.png\" section 1 order 1 title \"Images as Data and Arrays\" layout \"layout.jlhtml\" youtube id \"3zTO3LEY cM\" description \"\" tags \"lecture\", \"module1\", \"philip\", \"track julia\", \"matrix\", \"image\" using Markdown using InteractiveUtils This Pluto notebook uses bind for interactivity. When running this notebook outside of Pluto, the following 'mock version' of bind gives bound variables a default value instead of an error . macro bind def, element quote local iv try Base.loaded modules Base.PkgId Base.UUID \"6e696c72 6542 2067 7265 42206c756150\" , \"AbstractPlutoDingetjes\" .Bonds.initial value catch b missing end local el esc element global esc def Core.applicable Base.get, el ? Base.get el iv el el end end begin using Colors, ColorVectorSpace, ImageShow, FileIO, ImageIO using PlutoUI using PlutoTeachingTools using HypertextLiteral end PlutoUI.TableOfContents aside true md\"\"\" Initializing packages When running this notebook for the first time, this could take up to 15 minutes. Hang in there \"\"\" md\"\"\" Images as examples of data all around us Welcome to the Computational Thinking using Julia for Real World Problems, at MIT in Fall 2024 The aim of this course is to bring together concepts from computer science and applied math with coding in the modern Julia language , and to see how to apply these techniques to study interesting applications and of course to have fun . We would be pleased if students who have been interested in computer science now become interested in computational science and those interested in scientific applications learn computer science they may not see elsewhere. ... and for all students, we wish to share the value of the Julia language as the best of both worlds. \"\"\" md\"\"\" Alan's Essay Are all programming languages the same? Superficially, many programming languages are very similar. \"Showoffs\" will compare functional programming vs imperative programming. Others will compare compiled languages vs dynamic languages. I will avoid such fancy terms in this little essay, preferring to provide this course's pedagogical viewpoint. Generally speaking beginning programmers should learn to create \"arrays\" write \"for loops\", \"conditionals\", \"comparisons\", express mathematical formulas, etc. So why Julia at a time when Python seems to be the language of teaching, and Java and C so prominent in the corporate world? As you might imagine, we believe Julia is special. Oh you will still have the nitty gritty of when to use a bracket and a comma. You might have strong opinions as to whether arrays should begin with 0 or 1 joke some say it's time to compromise and use ½. Getting past these irrelevant issues, you will begin to experience one by one what makes Julia so very special. For starters, a language that runs fast is more fun. We can have you try things that would just be so slow in other languages it would be boring. We also think you will start to notice how natural Julia is, how it feels like the mathematics, and how flexible it can be. Getting to see the true value of fancy terms like multiple dispatch, strong typing, generic programming, and composable software will take a little longer, but stick with us, and you too will see why Julia is so very special. \"\"\" md\"\"\" Computer Science and Computational Science Working Together \"\"\" md\"\"\" Applications of computer science in the real world use data , i.e. information that we can measure in some way. Data take many different forms, for example Numbers that change over time time series Stock price each second minute day Weekly number of infections Earth's global average temperature Video The view from a window of a self driving car A hurricane monitoring station Ultrasound e.g. prenatal Images Diseased versus healthy tissue in a medical scan Pictures of your favourite dog \"\"\" md\"\"\" Exercise Think of another two examples in each category. Can you think of other categories of data? \"\"\" md\"\"\" Computational science can be summed up by a simplified workflow \"\"\" md\"\"\" data ⟶ input ⟶ process ⟶ model ⟶ visualize ⟶ output \"\"\" md\"\"\" html\" br \" To use any data source, we need to input the data of interest, for example by downloading it, reading in the resulting file, and converting it into a form that we can use in the computer. Then we need to process it in some way to extract information of interest. We usually want to visualize the results, and we may want to output them, for example by saving to disc or putting them on a website. We often want to make a mathematical or computational model that can help us to understand and predict the behavior of the system of interest. In this course we aim to show how programming, computer science and applied math combine to help us with these goals. \"\"\" md\"\"\" Data Images as an example of data Let's start off by looking at images and how we can process them. Our goal is to process the data contained in an image in some way, which we will do by developing and coding certain algorithms . Here is the the Fall 2020 version of this lecture small variations by 3 Blue 1 Brown Grant Sanderson for your reference. \"\"\" html\"\"\" script src \"https cdn.jsdelivr.net npm lite youtube embed 0.3.4 src lite yt embed.js\" integrity \"sha256 UyTkvYZC 3h rCA7QBuOG oGQCKOOJ4WOotzj Dd70Y \" crossorigin \"anonymous\" defer script link rel \"stylesheet\" href \"https cdn.jsdelivr.net npm lite youtube embed 0.3.4 src lite yt embed.css\" integrity \"sha256 w5MMSroouA6UcvWn3fonDvoZPvDX3dhQM0Vltk00dPs \" crossorigin \"anonymous\" lite youtube videoid DGojI9xcCfg params \"modestbranding 1&rel 0\" lite youtube \"\"\" md\"\"\" If we open an image on our computer or the web and zoom in enough, we will see that it consists of many tiny squares, or pixels \"picture elements\" . Each pixel is a block of one single colour, and the pixels are arranged in a two dimensional square grid. You probably already know that these pixels are stored in a computer numerically perhaps in some form of RGB red,green,blue format. This is the computer's representation of the data. Note that an image is already an approximation of the real world it is a two dimensional, discrete representation of a three dimensional reality. \"\"\" md\"\"\" Input and Visualize loading and viewing an Image in Julia \"\"\" md\"\"\" Let's use Julia to load actual images and play around with them. We can download images from the internet, your own file, or your own webcam. \"\"\" md\"\"\" Downloading an image from the internet or a local file We can use the `Images.jl` package to load an image file in three steps. \"\"\" md\"\"\" Step 1 from internet we specify the URL web address to download from html\" br \" note that Pluto places results before commands because some people believe output is more interesting than code. This takes some getting used to. \"\"\" url \"https user images.githubusercontent.com 6933510 107239146 dcc3fd00 6a28 11eb 8c7b 41aaf6618935.png\" md\"\"\" Step 2 Now we use the aptly named `download` function to download the image file to our own computer. Philip is Prof. Edelman's corgi. \"\"\" philip filename download url download to a local file. The filename is returned md\"\"\" Step 3 Using the `Images.jl` package loaded at the start of this notebook scroll up and take a look. we can load the file, which automatically converts it into usable data. We'll store the result in a variable. Remember the code is after the output. \"\"\" philip load philip filename md\" Hi there Philip \" md\"\"\" We see that the Pluto notebook has recognised that we created an object representing an image, and automatically displayed the resulting image of Philip, the cute Welsh Pembroke corgi and co professor of this course. Poor Philip will undergo quite a few transformations as we go along \"\"\" md\"\"\" 👉 Exercise change the url to use another image from the web. \"\"\" md\"\"\" Capturing an Image from your own camera \"\"\" md\"\"\" Even more fun is to use your own webcam. Try pressing the enable button below. Then press the camera to capture an image. Kind of fun to keep pressing the button as you move your hand etc. \"\"\" bind myface1 PlutoUI.WebcamInput help false, max size 150 myface1 myface1 , end 1 1 myface1 end 1 1, myface1 end 1 1, end 1 1 md\"\"\" Inspecting your data \"\"\" md\"\"\" Image size \"\"\" md\"\"\" The first thing we might want to know is the size of the image \"\"\" philip size size philip md\"\"\" Julia returns a pair of two numbers. Comparing these with the picture of the image, we see that the first number is the height, i.e. the vertical number of pixels, and the second is the width. \"\"\" philip height philip size 1 philip width philip size 2 md\"\"\" Locations in an image Indexing Now suppose that we want to examine a piece of the image in more detail. We need some way of specifying which piece of the image we want. Thinking of the image as a grid of pixels, we need a way to tell the computer which pixel or group of pixels we want to refer to. Since the image is a two dimensional grid, we can use two integers whole numbers to give the coordinates of a single pixel. Specifying coordinates like this is called indexing think of the index of a book, which tells you on which page an idea is discussed. In Julia we use square brackets, ` ` and ` ` for indexing \"\"\" a pixel philip 200, 100 md\"\"\" We see that Julia knows to draw our pixel object for us a block of the relevant color. When we index into an image like this, the first number indicates the row in the image, starting from the top, and the second the column , starting from the left. In Julia, the first row and column are numbered starting from 1, not from 0 as in some other programming languages. \"\"\" md\"\"\" We can also use variables as indices... \"\"\" md\"\"\" ...and these variables can be controlled by sliders \"\"\" bind row i Slider 1 size philip 1 , show value true bind col i Slider 1 size philip 2 , show value true row i,col i philip row i, col i md\"\"\" Locations in an image Range indexing We saw that we can use the row number and column number to index a single pixel of our image. Next, we will use a range of numbers to index multiple rows or columns at once, returning a subarray \"\"\" philip 550 650, 1 philip width md\"\"\" Here, we use `a b` to mean \" all numbers between `a` and `b` \". For example \"\"\" collect 1 10 md\"\"\" You can also use a ` ` without start and end to mean \" every index \" \"\"\" philip 550 650, md\"\"\" Let's get a single row of pixels \"\"\" philip 550, philip head philip 470 800, 140 410 md\"\"\" Scroll in on Philip's nose Use the widgets below slide left and right sides . \"\"\" bind range rows RangeSlider 1 size philip head 1 bind range cols RangeSlider 1 size philip head 2 nose philip head range rows, range cols md\"\"\" Process Modifying an image Now that we have access to image data, we can start to process that data to extract information and or modify it in some way. We might want to detect what type of objects are in the image, say to detect whether a patient has a certain disease. To achieve a high level goal like this, we will need to perform mid level operations, such as detecting edges that separate different objects based on their color. And, in turn, to carry that out we will need to do low level operations like comparing colors of neighboring pixels and somehow deciding if they are \"different\". \"\"\" md\"\"\" Representing colors We can use indexing to modify a pixel's color. To do so, we need a way to specify a new color. Color turns out to be a complicated concept, having to do with the interaction of the physical properties of light with the physiological mechanisms and mental processes by which we detect it We will ignore this complexity by using a standard method of representing colours in the computer as an RGB triple , i.e. a triple of three numbers r, g, b , giving the amount of red, of green and of blue in a colour, respectively. These are numbers between 0 none and 1 full . The final colour that we perceive is the result of \"adding\" the corresponding amount of light of each colour the details are fascinating, but beyond the scope of this course \"\"\" md\"\"\" We can create a new color in Julia as follows \"\"\" RGB 1.0, 0.0, 0.0 begin md\"\"\" A pixel with bind test r Scrubbable 0 0.1 1 default 0.1 red, bind test g Scrubbable 0 0.1 1 default 0.5 green and bind test b Scrubbable 0 0.1 1 default 1.0 blue looks like \"\"\" end RGB test r, test g, test b md\"\"\" Exercise 2.5 👉 Write a function `invert` that inverts a color, i.e. sends r, g, b to 1 r, 1 g, 1 b . \"\"\" function invert color AbstractRGB return missing end md\"Let's invert some colors \" color black RGB 0.0, 0.0, 0.0 invert color black color red RGB 0.8, 0.1, 0.1 invert color red md\"Can you invert the picture of Philip?\" philip inverted missing md\"\"\" Modifying a pixel Let's start by seeing how to modify an image, e.g. in order to hide sensitive information. We do this by assigning a new value to the color of a pixel \"\"\" let temp copy philip head temp 100, 200 RGB 1.0, 0.0, 0.0 temp end md\"\"\" Groups of pixels We probably want to examine and modify several pixels at once. For example, we can extract a horizontal strip 1 pixel tall \"\"\" philip head 50, 50 100 md\"\"\" Here, Julia is showing the strip as a collection of rectangles in a row. \"\"\" md\"\"\" And then modify it \"\"\" let temp copy philip head temp 50, 50 100 . RGB 1.0, 0.0, 0.0 temp end md\"\"\" Similarly we can modify a whole rectangular block of pixels \"\"\" let temp copy philip head temp 50 100, 50 100 . RGB 1.0, 0.0, 0.0 temp end md\"\"\" Exercise 1.2 👉 Generate a vector of 100 zeros. Change the center 20 elements to 1. \"\"\" function create bar return missing end if isdefined create bar not defined create bar else let result create bar if ismissing result still missing elseif isnothing result keep working md\"Did you forget to write `return`?\" elseif result isa Vector || length result 100 keep working md\"The result should be a `Vector` with 100 elements.\" elseif result 1,50,100 0,1,0 keep working else correct end end end md\"\"\" Reducing the size of an image \"\"\" md\"\"\" Maybe we would also like to reduce the size of this image, since it's rather large. For example, we could take every 10th row and every 10th column and make a new image from the result \"\"\" reduced image philip 1 10 end, 1 10 end md\"\"\" Note that the resulting image doesn't look very good, since we seem to have lost too much detail. Exercise Think about what we might do to reduce the size of an image without losing so much detail. \"\"\" md\"\"\" Model Creating synthetic images Think about your favorite Pixar movie e.g. Monsters Inc. Movie frames are images that are generated from complicated mathematical models. Ray tracing which may be covered in this class is a method for making images feel realistic. \"\"\" md\"\"\" Output Saving an image to a file Finally, we want to be able to save our new creation to a file. To do so, you can right click on a displayed image, or you can write it to a file. Fill in a path below \"\"\" save \"reduced phil.png\", reduced image md\"\"\" html\" br \" \"\"\" md\"\"\" Computer science Arrays An image is a concrete example of a fundamental concept in computer science, namely an array . Just as an image is a rectangular grid, where each grid cell contains a single color, an array is a rectangular grid for storing data. Data is stored and retrieved using indexing, just as in the image examples each cell in the grid can store a single \"piece of data\" of a given type. Dimension of an array An array can be one dimensional, like the strip of pixels above, two dimensional, three dimensional, and so on. The dimension tells us the number of indices that we need to specify a unique location in the grid. The array object also needs to know the length of the data in each dimension. Names for different types of array One dimensional arrays are often called vectors or, in some other languages, \"lists\" and two dimensional arrays are matrices . Higher dimensional arrays are tensors . Arrays as data structures An array is an example of a data structure , i.e. a way of arranging data such that we can access it. A key theme in computer science is that of designing different data structures that represent data in different ways. Conceptually, we can think of an array as a block of data that has a position or location in space. This can be a useful way to arrange data if, for example, we want to represent the fact that values in nearby locations in array are somehow near to one another. Images are a good example of this neighbouring pixels often represent different pieces of the same object, for example the rug or floor, or Philip himself, in the photo. We thus expect neighbouring pixels to be of a similar color. On the other hand, if they are not, this is also useful information, since that may correspond to the edge of an object. \"\"\" md\"\"\" Julia constructing arrays Creating vectors and matrices Julia has strong support for arrays of any dimension. Vectors, or one dimensional arrays, are written using square brackets and commas \"\"\" 1, 20, \"hello\" RGB 1, 0, 0 , RGB 0, 1, 0 , RGB 0, 0, 1 md\"\"\" Matrices, or two dimensional arrays, also use square brackets, but with spaces and new lines instead of commas \"\"\" RGB 1, 0, 0 RGB 0, 1, 0 RGB 0, 0, 1 RGB 0.5, 0.5, 0.5 md\"\"\" Array comprehensions It's clear that if we want to create an array with more than a few elements, it will be very tedious to do so by hand like this. Rather, we want to automate the process of creating an array by following some pattern, for example to create a whole palette of colors Let's start with all the possible colors interpolating between black, `RGB 0, 0, 0 `, and red, `RGB 1, 0, 0 `. Since only one of the values is changing, we can represent this as a vector, i.e. a one dimensional array. A neat method to do this is an array comprehension . Again we use square brackets to create an array, but now we use a variable that varies over a given range values \"\"\" RGB x, 0, 0 for x in 0 0.1 1 md\"\"\" Here, `0 0.1 1` is a range the first and last numbers are the start and end values, and the middle number is the size of the step. \"\"\" md\"\"\" In a similar way we can create two dimensional matrices, by separating the two variables for each dimension with a comma `,` \"\"\" RGB i, j, 0 for i in 0 0.1 1, j in 0 0.1 1 md\"\"\" Joining matrices We often want to join vectors and matrices together. We can do so using an extension of the array creation syntax \"\"\" philip head philip head philip head reverse philip head, dims 2 reverse philip head, dims 1 rot180 philip head md\"\"\" Pluto Interactivity using sliders \"\"\" md\"\"\" Suppose we want to see the effect of changing the number of colors in our vector or matrix. We could, of course, do so by manually fiddling with the range. It would be nice if we could do so using a user interface , for example with a slider . Fortunately, the Pluto notebook allows us to do so \"\"\" md\"\"\" We can define a slider using \"\"\" bind number reds Slider 1 100, show value true md\"\"\" The `Slider` type is defined in the `PlutoUI.jl` package. \"\"\" md\"\"\" This creates a new variable called `number reds`, whose value is the value shown by the slider. When we move the slider, the value of the variable gets updated. Since Pluto is a reactive notebook, other cells which use the value of this variable will automatically be updated too \"\"\" md\"\"\" Let's use this to make a slider for our one dimensional collection of reds \"\"\" RGB red value number reds, 0, 0 for red value in 0 number reds md\"\"\" When you move the slider, you should see the number of red color patches change \"\"\" md\"\"\" What is going on here is that we are creating a vector in which `red value` takes each value in turn from the range from `0` up to the current value of `number reds`. If we change `number reds`, then we create a new vector with that new number of red patches. \"\"\" md\"\"\" Exercise Make three sliders with variables `r`, `g` and `b`. Then make a single color patch with the RGB color given by those values. \"\"\" md\"\"\" We can do the same to create different size matrices, by creating two sliders, one for reds and one for greens. Try it out \"\"\" md\"\"\" Summary \"\"\" md\"\"\" Let's summarize the main ideas from this notebook Images are arrays of colors We can inspect and modify arrays using indexing We can create arrays directly or using array comprehensions \"\"\" begin colored line x Vector Real Gray. Float64. hcat x ' colored line x Any nothing end colored line create bar bigbreak html\" br br br br br \" bigbreak "},{"url":"tools/update_notebook_packages/","title":"update_notebook_packages","description":"","tags":[],"text":"if isdir \"pluto deployment environment\" || length ARGS 1 error \"\"\" Run me from the root of the repository directory, using julia tools update notebook packages.jl level Where level is one of PATCH, MINOR, MAJOR \"\"\" end if VERSION v\"1.6.0 aaa\" error \"Our website needs to be generated with Julia 1.6. Go to julialang.org downloads to install it.\" end import Pkg Pkg.activate \". pluto deployment environment\" Pkg.instantiate import Pluto flatmap args... vcat map args... ... all files recursive flatmap walkdir \"src\" do root, dirs, files joinpath. root, , files end all notebooks filter Pluto.is pluto notebook, all files recursive level getfield Pkg, Symbol \"UPLEVEL ARGS 1 \" for n in all notebooks info \"Updating\" n Pluto.update notebook environment n backup false, level end "}]